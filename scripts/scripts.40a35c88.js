"use strict";angular.module("FlyveMDM",["ngAnimate","ngSanitize","ui.router","smart-table","ngFileUpload","ngMaterial","ngMaterialAccordion","chart.js"]).config(["$urlRouterProvider","$stateProvider","$mdThemingProvider","$httpProvider","$logProvider","$qProvider","ChartJsProvider","DEBUG",function(a,b,c,d,e,f,g,h){a.otherwise("/"),f.errorOnUnhandledRejections(!1),b.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("dashboard",{url:"/",templateUrl:"views/dashboard.html",controller:"DashboardCtrl"}).state("account_page",{url:"/account",templateUrl:"views/account.html",controller:"UserPreferencesCtrl"}).state("invitation_logs",{url:"/admin/invitations/{id:int}/logs",templateUrl:"views/invitationlogs.html",controller:"InvitationLogsCtrl"}).state("account_validation",{url:"/account/{id:int}/validation/{hash:[0-9a-f]{64}}",templateUrl:"views/accountvalidation.html",controller:"AccountValidationCtrl"}).state("device",{url:"/admin/devices/{id:int}",templateUrl:"views/device.html",controller:"DeviceCtrl"}).state("devices",{url:"/admin/devices",templateUrl:"views/devices.html",controller:"DevicesCtrl"}).state("invitations",{url:"/admin/invitations",templateUrl:"views/invitations.html",controller:"InvitationsCtrl"}).state("admin_fleets",{url:"/admin/fleets",templateUrl:"views/admin_fleets.html",controller:"FleetsAdminCtrl"}).state("admin_files",{url:"/admin/files",templateUrl:"views/admin_files.html",controller:"FilesAdminCtrl"}).state("admin_applications",{url:"/admin/apps",templateUrl:"views/admin_applications.html",controller:"AppsAdminCtrl"}).state("admin_users",{url:"/admin/users",templateUrl:"views/admin_users.html",controller:"UsersAdminCtrl"}).state("about_page",{url:"/about",templateUrl:"views/about.html",controller:"AboutCtrl"}).state("contact_teclib",{url:"/contact",templateUrl:"views/contact.html",controller:"ContactCtrl"}).state("help_page",{url:"/help",templateUrl:"views/help.html"}),e.debugEnabled(h),c.theme("default").primaryPalette("light-green").accentPalette("light-blue"),c.definePalette("petrole",{50:"#b2f3f1",100:"#70e9e6",200:"#3fe1dd",300:"#1dbcb8",400:"#19a19e",500:"#158784",600:"#116c6a",700:"#0d5250",800:"#093836",900:"#051d1c",A100:"#b2f3f1",A200:"#70e9e6",A400:"#1FFFD9",A700:"#00C2A1",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100 A200"}),c.definePalette("gris",{50:"#c4c3c3",100:"#9e9c9c",200:"#828080",300:"#5e5c5c",400:"#4e4d4d",500:"#3f3e3e",600:"#302f2f",700:"#202020",800:"#111010",900:"#010101",A100:"#c4c3c3",A200:"#9e9c9c",A400:"#4e4d4d",A700:"#202020",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100 A200"}),c.theme("flyve-mdm").primaryPalette("petrole").accentPalette("petrole").warnPalette("gris").backgroundPalette("gris"),c.setDefaultTheme("flyve-mdm"),c.enableBrowserColor(),d.defaults.headers.post["Content-Type"]="application/json",d.defaults.headers.common["Content-Type"]="application/json",g.setOptions({chartColors:["#3e3e3e","#158784"],responsive:!1,legend:{display:!0,labels:{fontColor:"#4d4d4d",fontFamily:"Open Sans",fontStyle:"italic",boxWidth:18,fontSize:18}}}),g.setOptions("bar",{responsive:!0,scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1},ticks:{min:0,stepSize:.5}}]}})}]).run(["$rootScope",function(a){var b=angular.element(document.body);a.$on("$stateChangeSuccess",function(a,c){"login"===c.name?b.addClass("hundred-percent-height-page"):b.removeClass("hundred-percent-height-page")})}]),angular.module("FlyveMDM").provider("AuthProvider",["GLPI_API_URL","GlpiObjectNames","PluginObjectNames","$httpProvider","$provide","USER_TOKEN","DEBUG",function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o=function(){},p=function(a){null===a?localStorage.removeItem("sessionToken"):localStorage.setItem("sessionToken",a),i.sessionToken=a};o.prototype.exceptedEndpoints=[{url:b.initSession},{url:b.KillSession},{url:c.User,method:"POST"}],o.prototype.isExceptedEndpoint=function(a,b){var c=!1;return this.exceptedEndpoints.some(function(d){if(d.url===a)return void 0!==d.method&&d.method!==b||(c=!0),!0}),c},o.prototype.attemptLogin=function(c,d){var e=j.defer(),f=h({method:"GET",url:a+b.InitSession,headers:{Authorization:"Basic "+window.btoa(c+":"+d)}});return f.then(function(a){p(a.data.session_token),e.resolve()}),f.catch(function(){p(null),e.reject()}),e.promise},o.prototype.getTempSessionToken=function(){var c=j.defer();return h({url:a+b.InitSession,method:"GET",headers:{Authorization:"user_token "+f}}).then(function(a){c.resolve(a.data.session_token)},function(){c.reject()}),c.promise},o.prototype.attemptRegister=function(d){var e=j.defer();return this.getTempSessionToken().then(function(f){h({method:"POST",url:a+c.User,data:{input:d},headers:{"Session-Token":f}}).then(function(){e.resolve(),h({method:"GET",url:a+b.KillSession,headers:{"Session-Token":f}})},function(){e.reject()})},function(){e.reject()}),e.promise},o.prototype.logout=function(){navigator.credentials&&navigator.credentials.requireUserMediation();var c=j.defer(),d=h({method:"GET",url:a+b.KillSession,headers:{"Session-Token":i.sessionToken}}),e=function(){p(null),c.resolve()};return d.then(e),d.catch(e),c.promise},o.prototype.seemsLogged=function(){return null!==localStorage.getItem("sessionToken")},o.prototype.showLogin=function(){return l.go("login")},o.prototype.getCurrentToken=function(){return localStorage.getItem("sessionToken")},this.$get=["$injector",function(a){return n=a.get("Notifications"),h=a.get("$http"),i=a.get("$rootScope"),j=a.get("$q"),l=a.get("$state"),m=a.get("$log"),k=new o}],e.factory("SessionTokenInterceptor",["$q","$rootScope","GLPI_API_URL",function(a,b,c){return{request:function(a){var d=a.url.split(c)[1],e=b.sessionToken;return/\.html$/.exec(a.url)?a:(void 0===d||k.isExceptedEndpoint(d,a.method)||function(a){e&&(a.headers["Session-Token"]=e),a.data||(a.data={})}(a),a)},response:function(a){return g&&(console.dir(a),m.debug(a.config.method+" "+a.config.url+" "+a.statusText+" "+a.status)),a},responseError:function(b){if(b.status!==-1||b.config.timeout||b.config.data.file||(n.error("Internet Issue"),g&&m.info("Internet Issue")),"[object Array]"===Object.prototype.toString.call(b.data))switch(b.data[0]){case"ERROR_SESSION_TOKEN_INVALID":case"ERROR_SESSION_TOKEN_MISSING":case"ERROR_RESOURCE_NOT_FOUND_NOR_COMMONDBTM":p(null),k.showLogin();break;default:var c=b.data[1];if(Array.isArray(c))c.forEach(function(a){n.error(a.message)});else{c.toString().indexOf(";")!==-1?(c=c.split(";"),n.error(c[0])):n.error(c)}}return a.reject(b)}}}]),d.interceptors.push("SessionTokenInterceptor"),d.defaults.timeout=5e3}]).run(["$rootScope",function(a){a.sessionToken=localStorage.getItem("sessionToken")}]),angular.module("FlyveMDM").constant("GlpiObjectNames",{ActiveEntities:"/getActiveEntities",Computer:"/Computer",ComputerAntivirus:"/ComputerAntivirus",ComputerDisk:"/ComputerDisk",ComputerModel:"/ComputerModel",ComputerType:"/ComputerType",ComputerVirtualMachine:"/ComputerVirtualMachine",Computer_SoftwareVersion:"/Computer_SoftwareVersion",Computer_SoftwareLicense:"/Computer_SoftwareLicense",Config:"/Config",Contract_Item:"/Contract_Item",DeviceCase:"/DeviceCase",DeviceControl:"/DeviceControl",DeviceDrive:"/DeviceDrive",DeviceGraphicCard:"/DeviceGraphicCard",DeviceHardDrive:"/DeviceHardDrive",DeviceMemory:"/DeviceMemory",DeviceMemoryType:"/DeviceMemoryType",DeviceMotherboard:"/DeviceMotherboard",DeviceNetworkCard:"/DeviceNetworkCard",DevicePci:"/DevicePci",DevicePowerSupplyrel:"/DevicePowerSupply",DeviceProcessor:"/DeviceProcessor",DeviceSoundCard:"/DeviceSoundCard",Document_Item:"/Document_Item",Entity:"/Entity",FileSystem:"/FileSystem",FullSession:"/getFullSession",ActiveProfile:"/getActiveProfile",GlpiUser:"/User",Infocom:"/Infocom",InitSession:"/initSession",IpAddress:"/IpAddress",Item_Project:"/Item_Project",Item_Ticket:"/Item_Ticket",KillSession:"/killSession",Manufacturer:"/Manufacturer",NetworkPort:"/NetworkPort",OperatingSystem:"/OperatingSystem",OperatingSystemVersion:"/OperatingSystemVersion",Profile_User:"/Profile_User",ReservationItem:"/ReservationItem",Software:"/Software",SoftwareCategory:"/SoftwareCategory",SoftwareVersion:"/SoftwareVersion",VirtualMachineSystem:"/VirtualMachineSystem",VirtualMachineType:"/VirtualMachineType"}),angular.module("FlyveMDM").directive("flyveNavigation",["AuthProvider",function(a){var b=["login"];return{restrict:"A",templateUrl:"views/navigation.html",link:function(c,d,e,f){c.visible=!1,c.smallForced=!1;var g=angular.element(document.body);c.$watch("visible",function(a){a?g.removeClass("nav-invisible"):g.addClass("nav-invisible")}),c.$watch("smallForced",function(a){a?g.addClass("nav-forced-small"):g.removeClass("nav-forced-small")}),c.$on("$stateChangeSuccess",function(c,d){b.indexOf(d.name)>-1||!a.seemsLogged()?f.setVisible(!1):f.setVisible(!0)})},controller:["$scope",function(a){this.toggleSmall=function(){a.smallForced=!a.smallForced},this.setVisible=function(b){a.visible=b}}],controllerAs:"nav",scope:{}}}]).directive("navbarSubmenu",function(){return{restrict:"E",link:function(a,b,c,d,e){a.visible=!1;var f=b.parent()[0].firstElementChild;f.addEventListener("click",function(){d.toggleMenu()},!1),a.$watch("visible",function(a){a?b.attr("class","visible"):b.attr("class","")}),a.$on("$stateChangeSuccess",function(a,b){["admin_fleets","admin_files","admin_applications","admin_users"].indexOf(b.name)>-1?f.setAttribute("class","active"):f.setAttribute("class","")}),b.append(e())},controller:["$scope",function(a){this.toggleMenu=function(){a.$apply(function(){a.visible=!a.visible})}}],transclude:!0,scope:{}}}).run(function(){angular.element(document.body).prepend("<nav flyve-navigation></nav>")}),angular.module("FlyveMDM").run(["$rootScope",function(a){a.currentViewMenu=[]}]).controller("NavbarCtrl",["$scope","$rootScope",function(a,b){a.menu=[],a.$on("$stateChangeStart",function(){b.currentViewMenu=[]})}]),angular.module("FlyveMDM").controller("DashboardCtrl",["$scope","$state","$q","AuthProvider","DashboardFac","Notifications",function(a,b,c,d,e,f){if(!d.seemsLogged())return d.showLogin(!0);a.lock_refresh=!1,a.links=function(a){b.go(a)},a.editDevice=function(a){b.go("device",{id:a})},e.getMacAddress().then(function(b){a.devicesByMacAddress=b}),a.refreshDashboard=function(b){a.lock_refresh=!0,b&&f.loading("Refresh in progress...");var d={invitations:e.getInvitations(),users:e.getNumberOfUsers(),devices:e.getNumberOfDevices(),applications:e.getNumberOfApplications(),fleets:e.getNumberOfFleets(),files:e.getNumberOfFiles(),devices_os:e.getAndroidVersions(),devicesByMacAddress:e.getMacAddress(),devicesByRealName:e.getDevicesByRealName()};c.all(d).then(function(c){a.users=c.users,a.devices=c.devices,a.applications=c.applications,a.fleets=c.fleets,a.files=c.files,a.devicesByMacAddress=c.devicesByMacAddress,a.devicesByRealName=c.devicesByRealName,a.invitations={labels:["Done","Pending"],data:[c.invitations.done,c.invitations.pending],dataset:{backgroundColor:["#6cc2bc","#158784"],hoverBackgroundColor:["#6cc2bc","#158784"],hoverBorderColor:["#6cc2bc","#158784"]}},a.devices_os={series:["Android","iOS"],labels:c.devices_os.android_version,data:[c.devices_os.android_version_quantity],dataset:{},colors:[{backgroundColor:"#6cc2bc",borderColor:"#6cc2bc",hoverBackgroundColor:"#6cc2bc",hoverBorderColor:"#6cc2bc"},{backgroundColor:"#158784",borderColor:"#158784",hoverBackgroundColor:"#158784",hoverBorderColor:"#158784"}]},b&&f.done("Dashboard refreshed"),a.lock_refresh=!1})},a.refreshDashboard()}]),angular.module("FlyveMDM").controller("DevicesCtrl",["GLPI_API_URL","AuthProvider","DevicesFac","InvitationsFac","Notifications","$state","$scope","$mdDialog",function(a,b,c,d,e,f,g,h){if(!b.seemsLogged())return b.showLogin(!0);g.fleets=[],g.selectedFleets=[],g.displayedDevices=[],g.selectedFleetToFilterWith=null,g.loading=!0;var i=null;g.fillTable=function(a){g.displayedDevices=[],null===i&&(i=a),c.getDevicesData().then(function(b){g.fleets=b.getFleets.data;var c=b.getFleets.data.map(function(a){return a.id}),d=b.getComputers.data.map(function(a){return a.id}),e=g.selectedFleets.map(function(a){return a.id});b.getAgents.data.forEach(function(a){var f=c.indexOf(a.plugin_flyvemdm_fleets_id);f!==-1&&(a.fleet=b.getFleets.data[f]);var h=d.indexOf(a.computers_id);if(h!==-1){var i=b.getComputers.data[h];a.serial=i.serial,a.realname=a.name,a.user_email=i.name,a.manufacturer_model="",0!==i.manufacturers_id&&(a.manufacturer_model=i.manufacturers_id+" "+i.computermodels_id)}a.last_contact?a._contacted=moment.utc(a.last_contact).fromNow():a._contacted="Never been contacted";var j=e.indexOf(a.plugin_flyvemdm_fleets_id);0!==e.length&&j===-1||g.displayedDevices.push(a)}),g.collectionLength=g.displayedDevices.length,a.pagination.totalItemCount=g.displayedDevices.length,g.loading=!1})},g.$watch("selectedFleetToFilterWith",function(a){g.selectedFleetToFilterWith=null,a&&(g.selectedFleets.push(a),g.refreshTable())}),g.refreshTable=function(){g.displayedDevices=[],i.pagination.start=0,null!==i&&g.fillTable(i)},g.editDevice=function(a){f.go("device",{id:a})},g.deleteDevice=function(a){h.show(h.confirm().title("Delete device #"+a).content("You are going to delete device "+a+".").ariaLabel("delete this device").ok("Accept").cancel("Cancel")).then(function(){c.deleteDevice(a).then(function(){e.done("Device deleted"),g.displayedDevices.some(function(b,c){if(b.id===a)return g.displayedDevices.splice(c,1),!0})})})};var j=function(a,b){a.lock_submit=!1,a.user_email="",a.cancel=function(){b.cancel()},a.enrollDevice=function(){a.lock_submit=!0,d.enrollNewDevice(a.user_email).then(function(){b.hide().then(function(){e.done("Invitation requested")})},function(){a.lock_submit=!1})}};j.$inject=["$scope","$mdDialog"],g.insertIntoTable=g.enrollNewDevice=function(){h.show({controller:j,templateUrl:"views/dialog_enrollnewdevice.html",parent:angular.element(document.body),clickOutsideToClose:!1})}}]),angular.module("FlyveMDM").factory("DevicesFac",["GLPI_API_URL","GlpiObjectNames","PluginObjectNames","$q","$http",function(a,b,c,d,e){return{getDevicesData:function(){var f={getAgents:e.get(a+c.Agent),getUsers:e.get(a+b.GlpiUser),getFleets:e.get(a+c.Fleet),getComputers:e.get(a+b.Computer,{params:{expand_dropdowns:!0}})};return d.all(f)},deleteDevice:function(b){var f=d.defer();return e({method:"DELETE",url:a+c.Agent+"/"+b}).then(function(){f.resolve()},function(){f.reject()}),f.promise}}}]),angular.module("FlyveMDM").controller("DeviceCtrl",["GLPI_API_URL","AuthProvider","AgentFac","GeolocationFac","InventoryFac","FleetsAdminFac","GlosaryObjectNames","$scope","$state","$stateParams","$mdDialog","$mdToast","$q","Notifications",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){h.lock_inventory=!1,e.getComputer(h.agent.computers_id).then(function(b){h.title=q,h.computer=b,h.computer.date.last_report=h.agent.last_report,h.computer.date.last_contact=h.agent.last_contact,h.computer.memory.partitioning2=angular.copy(h.computer.memory.partitioning.shift()),h.no_inventory=!1,a&&n.done("Completed")},function(){h.title=q,h.loading=!1,h.no_inventory=!0})}if(!b.seemsLogged())return b.showLogin(!0);h.lock_save_device=!1,h.lock_inventory=!1,h.lock_geolocation=!1,h.title="Loading...",h.agent={};var p=null,q=null;h.computer={},h.no_inventory=!0,h.fleets=[],h.loading=!0,h.selectedTab=0;var r,s=0;h.currentNGeolocationPages=0,h.currentGeolocationPages=[],h.currentOpenedPage=1,h.geolocationsLoading=!1;var t,u=[],v=L.icon({iconUrl:"images/favicon-32x32.png",iconSize:[32,32]});h.latestGeolocations=[];var w=function(a,b){var c=angular.copy(h.latestGeolocations);h.latestGeolocations=[],h.geolocationsLoading=!0,d.getDeviceGeolocations(h.agent.computers_id,a,b).then(function(a){function b(){t||(t=L.map("mapid").setView([48.8583701,2.2922926],16),L.tileLayer("//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',id:"mapbox.streets"}).addTo(t)),navigator.geolocation.getCurrentPosition(function(a){var b=a.coords;t.panTo(new L.LatLng(b.latitude,b.longitude))},function(){t.panTo(new L.LatLng(48.8583701,2.2922926))},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}s=a.totalcount,h.currentNGeolocationPages=Math.ceil(s/r),function(a){for(var b=1,c=[];b<=a;)c.push(b),b++;h.currentGeolocationPages=c}(h.currentNGeolocationPages),a.data.length>0?(a.data.forEach(function(b,d){var e=c.map(function(a){return a.id}).indexOf(b.id);e!==-1&&(a.data[d].layer=c[e].layer)}),h.latestGeolocations=a.data,t||(isNaN(h.latestGeolocations[0].displayable.lat)?b():(t=L.map("mapid").setView([h.latestGeolocations[0].displayable.lat,h.latestGeolocations[0].displayable.lng],16),L.tileLayer("//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',id:"mapbox.streets"}).addTo(t)))):b(),h.geolocationsLoading=!1},function(){h.geolocationsLoading=!1})};h.getInventoryFromDevice=function(){h.lock_inventory=!0;var a=c.requestCurrentInventory(h.agent.id);a.promise.then(function(){o(!0)},function(){h.lock_inventory=!1}),n.loading("Inventory in progress...",a.cancel)},c.getDevice(j.id).then(function(a){a.last_contact?a._contacted=moment.utc(a.last_contact).fromNow():a._contacted="Never been contacted",h.agent=a,o(),q=a.name,f.getFleets().then(function(b){h.fleets=b,p=a.fleet_id;var c=b.map(function(a){return a.id}).indexOf(a.fleet_id);c!==-1&&(h.agent.fleet_name=b[c].name)}),r=8,w(0,r)},function(){h.title="Not found"}),h.fillTable=function(a,b){h.stCtrl=b,h.loading=!0,h.displayedApplications&&h.computer.applications&&(a.pagination.totalItemCount=h.computer.applications.length,h.displayedApplications=h.computer.applications,h.loading=!1),h.computer.applications||(h.loading=!1,h.no_inventory=!0)},h.refreshTable=function(){h.displayedApplications=[],h.stCtrl.slice(0,h.stCtrl.tableState().pagination.number)},h.sendPing=function(){h.pingSendingStatus="Ping sent as of "+moment().format("dddd, MMMM Do YYYY, h:mm:ss a"),h.pingReplyStatus="";var a=c.sendPing(h.agent.id);a.promise.then(function(){n.done("Echo reply"),h.agent._contacted=moment(Date.now()).fromNow(),h.pingReplyStatus+=" Device replied at: "+moment().format("dddd, MMMM Do YYYY, h:mm:ss a")},function(a){a.status===-1?h.pingReplyStatus="Cancelled querying the device (Client replied at: ":h.pingReplyStatus="Timeout querying the device (Server replied at: ",h.pingReplyStatus+=moment().format("dddd, MMMM Do YYYY, h:mm:ss a")+")"}),n.loading("Echo request",a.cancel)},h.saveDevice=function(){h.lock_save_device=!0;var a=q!==h.agent.name,b=p!==h.agent.fleet_id;if(a&&(a=h.agent.name,q=h.agent.name),b&&(b=h.agent.fleet_id,p=h.agent.fleet_id),a||b){var d=c.updateDevice(h.agent.id,a,b);d.promise.then(function(b){h.lock_save_device=!1,b?(n.done("Device #"+h.agent.id+" updated"),q=a,h.title=a):(n.done("Error saving the device #"+h.agent.id),console.error(b))}),n.loading("Saving...",d.cancel)}else n.done("Not changes to save"),h.lock_save_device=!1},h.glosary=function(a,b){k.show(k.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(a.target.textContent).textContent(g[b]).ariaLabel("Glosary Dialog").ok("Close").targetEvent(a))},h.wipeDevice=function(){k.show(k.confirm().title("This is the last warning").content("You're about to wipe the device. Are you really certain ? (the device is going to delete all its data next time it turns on)").ariaLabel("this is the last warning, do you want to wipe the device?").ok("Accept").cancel("Cancel")).then(function(){c.wipeDevice(h.agent.id).promise.then(function(){n.done("Asking wipe for device "+h.agent.name),i.go("devices")})})},h.deleteDevice=function(){k.show(k.confirm().title("Delete device #"+h.agent.id).content("You are going to delete device "+h.agent.id+".").ariaLabel("delete this device").ok("Accept").cancel("Cancel")).then(function(){c.deleteDevice(h.agent.id).promise.then(function(){n.done("Deleted the device "+h.agent.name),i.go("devices")})})},h.unenrollDevice=function(){k.show(k.confirm().title("Unenroll device #"+h.agent.id).content("You are going to unenroll device "+h.agent.id+".").ariaLabel("Unenroll this device").ok("Accept").cancel("Cancel")).then(function(){c.unenrollDevice(h.agent.id).promise.then(function(){n.done("Unenroll request complete for "+h.agent.name),i.go("devices")})})},h.requestCurrentGeolocation=function(){h.lock_geolocation=!0;var a=c.requestCurrentGeolocation(h.agent.id);a.promise.then(function(){n.done("Completed"),d.getDeviceGeolocations(h.agent.computers_id,0,1).then(function(){w(0,r)})}),a.promise.finally(function(){h.lock_geolocation=!1}),n.loading("Current geolocation in progress...",a.cancel)},h.displayGeolocationPage=function(a){h.currentOpenedPage=a,a--;var b=a*r;w(b,b+r)},h.toggleSelectGeolocation=function(a){var b=!1;(b=h.isSelectedGeolocation(a))===!1?(t.setView([a.displayable.lat,a.displayable.lng],16),a.layer=L.marker([a.displayable.lat,a.displayable.lng],{icon:v}).addTo(t),u.push(a)):(a.layer&&t.removeLayer(a.layer),u.splice(b,1))},h.isNaNGeolocation=function(a){return isNaN(a.displayable.lat)},h.isSelectedGeolocation=function(a){if(isNaN(a.displayable.lat))return!1;var b=!1;return u.some(function(c,d){if(c.id===a.id)return b=d,!0}),b}}]),angular.module("FlyveMDM").controller("InvitationsCtrl",["GLPI_API_URL","AuthProvider","InvitationsFac","Notifications","$scope","$state","$mdDialog",function(a,b,c,d,e,f,g){if(!b.seemsLogged())return b.showLogin(!0);var h=e;e.displayedInvitations=[],e.collectionLength=0,e.itemsByPage=5,e.loading=!1;var i=null;e.fillTable=function(a){null===i&&(i=a),e.loading=!0,c.getInvitations().then(function(b){e.loading=!1,e.displayedInvitations=b.getInvitations.map(function(a){var c=b.getUsers.data.map(function(a){return a.id}).indexOf(a.users_id);return c!==-1&&(a.user_email=b.getUsers.data[c].name),a}),e.displayedInvitations=b.getInvitations,e.collectionLength=b.getInvitations.length,a.pagination.totalItemCount=b.getInvitations.length})};var j=function(a,b){a.lock_submit=!1,a.user_email="",a.cancel=function(){b.cancel()},a.enrollDevice=function(){a.lock_submit=!0,c.enrollNewDevice(a.user_email).then(function(c){b.hide().then(function(){d.done("Invitation requested");var b={id:c,user_email:a.user_email};h.displayedInvitations.push(b)})})}};j.$inject=["$scope","$mdDialog"],e.insertIntoTable=e.enrollNewDevice=function(){g.show({controller:j,templateUrl:"views/dialog_enrollnewdevice.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.resendEmail=function(a){g.show(g.confirm().title("Resend invitation #"+a.id).content("You are going to resend email "+a.user_email+".").ariaLabel("Resend this email").ok("Accept").cancel("Cancel")).then(function(){c.resendInvitation(a.id,a.user_email).then(function(){d.done("Resend invitation requested")})})},e.invitationLogs=function(a){f.go("invitation_logs",{id:a})},e.deleteEmail=function(a){g.show(g.confirm().title("Delete invitation #"+a.id).content("You are going to delete email "+a.user_email+".").ariaLabel("Delete this email").ok("Accept").cancel("Cancel")).then(function(){c.deleteInvitation(a.id).then(function(){d.done("Invitation deleted"),h.displayedInvitations.some(function(b,c){if(b.id===a.id)return h.displayedInvitations.splice(c,1),!0})})})}}]),angular.module("FlyveMDM").factory("InvitationsFac",["GLPI_API_URL","GlpiObjectNames","PluginObjectNames","$q","$http",function(a,b,c,d,e){return{enrollNewDevice:function(b){var f=d.defer();return e({method:"POST",url:a+c.Invitation,data:{input:{_useremails:b}}}).then(function(a){f.resolve(a.data.id)},function(){f.reject()}),f.promise},resendInvitation:function(b,f){var g=d.defer();return e({method:"PUT",url:a+c.Invitation+"/"+b,data:{input:{_notify:f}}}).then(function(a){g.resolve(a.data[0])},function(){g.reject()}),g.promise},deleteInvitation:function(b){var f=d.defer();return e({method:"DELETE",url:a+c.Invitation+"/"+b}).then(function(){f.resolve()},function(){f.reject()}),f.promise},getInvitations:function(){var f=d.defer();e({method:"GET",url:a+c.Invitation}).then(function(a){var b={status:"pending"},c=a.data.filter(function(a){return Object.keys(b).every(function(c){return a[c]===b[c]})});f.resolve(c)},function(){f.reject()});var g={getInvitations:f.promise,getUsers:e.get(a+b.GlpiUser)};return d.all(g)},getInvitation:function(b){var f=d.defer();return e({method:"GET",url:a+c.Invitation+"/"+b}).then(function(a){var b=a.data,c={};c.users_id=b.users_id,f.resolve(c)},function(){f.reject()}),f.promise}}}]),angular.module("FlyveMDM").controller("InvitationLogsCtrl",["GLPI_API_URL","AuthProvider","InvitationsFac","InvitationLogsFac","UsersAdminFac","$stateParams","$scope",function(a,b,c,d,e,f,g){if(!b.seemsLogged())return b.showLogin(!0);g.displayedInvitationLogs=[],g.invitation_email="Loading...",g.loading=!1,c.getInvitation(f.id).then(function(a){e.getUser(a.users_id).then(function(a){g.invitation_email=a.username})});var h=null;g.fillTable=function(a){null===h&&(h=a),g.loading=!0,d.getLogs(f.id).then(function(b){g.loading=!1,g.displayedInvitationLogs=b,a.pagination.totalItemCount=b.length})}}]),angular.module("FlyveMDM").factory("InvitationLogsFac",["GLPI_API_URL","PluginObjectNames","$q","$http",function(a,b,c,d){return{getLogs:function(e){var f=c.defer();return d({method:"GET",url:a+b.Invitation+"/"+e+"/"+b.InvitationLog}).then(function(a){var b=a.data,c=b.map(function(a){var b={};return b.id=a.id,b.date_creation=a.date_creation,b.event=a.event,b});f.resolve(c)},function(){f.reject()}),f.promise}}}]),angular.module("FlyveMDM").controller("FleetsAdminCtrl",["AuthProvider","FilesAdminFac","FleetsAdminFac","Notifications","$state","$scope","$rootScope","$mdDialog","$q",function(a,b,c,d,e,f,g,h,i){function j(a){var b=angular.lowercase(a);return function(a){return angular.lowercase(a.name).indexOf(b)>=0}}function k(a){return a?f.policies.filter(j(a)):f.policies}function l(a){return a?f.wellknownPaths.filter(j(a)):f.wellknownPaths}if(!a.seemsLogged())return a.showLogin(!0);f.displayedCollection=[],f.loading=!0;var m=f;f.fillTable=function(a){c.getFleetsData(void 0).then(function(b){var c=b.getPoliciesCategory.data,d=b.getPolicies.data,e=b.getFleetPolicy.data,g=b.getFleets.data,h=b.getApplications.data,i=b.getFiles.data,j=b.getWellknownPath.data;f.wellknownPaths=j,f.applications=h,f.files=i,f.policies=[],f.policiesByCategory=[],f.policyCategories=[];for(var k in c)f.policiesByCategory[c[k].id]=[];d.some(function(a){["deployApp","removeApp","deployFile","removeFile"].indexOf(a.symbol)===-1&&(f.policiesByCategory[a.plugin_flyvemdm_policycategories_id].push(a),a.value=a.id,f.policies.push(a))});for(var l in c)f.policiesByCategory[c[l].id].length>0&&(c[l].policies=f.policiesByCategory[c[l].id],f.policyCategories.push(c[l]));f.displayedCollection=g,f.collectionLength=g.length,a.pagination.totalItemCount=g.length,f.loading=!1,f.fleetPolicies=[],f.fleetFiles=[],f.fleetApps=[];for(var m in g)f.fleetPolicies[g[m].id]=[],f.fleetApps[g[m].id]=[],f.fleetFiles[g[m].id]=[];var n=d.map(function(a){return a.symbol}).indexOf("deployApp"),o=d[n];f.policyToDeployAppId=o.id;var p=d.map(function(a){return a.symbol}).indexOf("removeApp"),q=d[p];f.policyToRemoveAppId=q.id;var r=d.map(function(a){return a.symbol}).indexOf("deployFile"),s=d[r];f.policyToDeployFileId=s.id;var t=d.map(function(a){return a.symbol}).indexOf("removeFile"),u=d[t];f.policyToRemoveFileId=u.id;for(var v in e)switch(e[v].plugin_flyvemdm_policies_id){case f.policyToDeployAppId:var w=h.map(function(a){return a.id}).indexOf(e[v].items_id),x=h[w];x&&(x.plugin_flyvemdm_fleet_policy_id=e[v].id,f.fleetApps[e[v].plugin_flyvemdm_fleets_id].push(x));break;case f.policyToDeployFileId:var y=i.map(function(a){return a.id}).indexOf(e[v].items_id),z=i[y];z&&(z.plugin_flyvemdm_fleet_policy_id=e[v].id,f.fleetFiles[e[v].plugin_flyvemdm_fleets_id].push(z));break;default:var A=d.map(function(a){return a.id}).indexOf(e[v].plugin_flyvemdm_policies_id),B=d[A];if(B)switch(B.plugin_flyvemdm_fleet_policy_id=e[v].id,B.value=e[v].value,B.type){case"dropdown":var C=JSON.parse(B.type_data);B.value_showed=C[B.value];break;case"bool":1===parseInt(B.value)?B.value_showed="Enabled":B.value_showed="Disabled";break;default:B.value_showed=e[v].value}f.fleetPolicies[e[v].plugin_flyvemdm_fleets_id]&&f.fleetPolicies[e[v].plugin_flyvemdm_fleets_id].push(B)}})},f.queryPolicySearch=k,f.queryPathSearch=l;var n=function(a,b,c){b.types=JSON.parse(c.type_data),b.policy=angular.copy(c),"bool"===b.policy.type&&""===b.policy.value&&(b.policy.value=0),b.hide=function(){a.hide()},b.cancel=function(){a.cancel()},b.save=function(b){a.hide(b)}};n.$inject=["$mdDialog","$scope","policy"];var o=function(a,d,e,f,g){function h(a){void 0!==a&&(d.addPolicyToFleet(a),d.searchText="")}function j(a){void 0!==a&&(d.fileUpload.path=a.name,d.fileUpload.upload,d.pathToSaveFileTo=a.name)}d.lock_file=!0,d.data=g,d.fleet=e,d.selectedIndex=f,d.editPolicy=function(b){a.hide().then(function(){switch(b.type){default:a.show({controller:n,templateUrl:"views/dialog_editpolicy.html",locals:{policy:b},clickOutsideToClose:!0}).then(function(a){d.data.policies.virtual.some(function(c,e){if(c.id===b.id)switch(d.data.policies.virtual[e].value=a,b.type){case"dropdown":var f=JSON.parse(b.type_data);d.data.policies.virtual[e].value_showed=f[a];break;case"bool":1===parseInt(a)?d.data.policies.virtual[e].value_showed="Enabled":d.data.policies.virtual[e].value_showed="Disabled";break;default:d.data.policies.virtual[e].value_showed=a}}),m.editFleet(d.fleet,1,d.data)},function(){m.editFleet(d.fleet,1,d.data)})}})},d.queryPolicySearch=m.queryPolicySearch,d.queryPathSearch=m.queryPathSearch,d.selectedPolicyChange=h,d.fileUpload={progress:0,upload:null,path:null},d.$watch("fileUpload.upload",function(){d.fileUpload.path&&d.fileUpload.upload&&(d.pathToSaveFileTo=d.fileUpload.path)}),d.$watch("pathToSaveFileTo",function(a){if(a){a.split("/")[1],d.lock_file=!1}else d.lock_file=!0}),d.selectedPathChange=j,d.wellknownPaths=m.wellknownPaths,d.uploadFile=function(a,c){a&&b.uploadFile(a).then(function(b){d.data.files.virtual.push({id:b.data.id,name:a.name}),d.data.files.deploy.push({id:b.data.id,name:a.name,destination:c}),d.fileUpload={progress:0,upload:null},d.pathToSaveFileTo=""},function(){},function(a){d.fileUpload.progress=a})},d.deleteAssociatedFile=function(c){a.show(a.confirm().title("Are you certain ?").content('you-re going to delete this "'+c.name+'" file, confirm ?').ok("Accept").cancel("Cancel")).then(function(){b.deleteFile(c.id).then(function(){d.data.files.virtual.some(function(a,b){c.id===a.id&&d.data.files.virtual.splice(b,1)}),d.data.files.current.some(function(a){c.id===a.id&&d.data.files.remove.push(a)})})},function(){}).finally(function(){m.editFleet(d.fleet,3,d.data)})},d.deletePolicyFromFleet=function(a){var b;if((b=d.data.policies.virtual.indexOf(a))>-1)return d.data.policies.virtual.splice(b,1),!0},d.addPolicyToFleet=function(b){switch(b.value=b.recommended_value,b.type){case"dropdown":var c=JSON.parse(b.type_data);b.value_showed=c[b.value];break;case"bool":1===parseInt(b.value)?b.value_showed="Enabled":(b.value_showed="Disabled",b.value=0);break;default:b.value_showed=b.value}b&&(d.data.policies.virtual.map(function(a){return a.id}).indexOf(b.id)===-1?d.data.policies.virtual.push(b):a.hide().then(function(){a.show(a.alert().title("Duplicate Policy").content("The policy: "+b.name+" is already added.").ariaLabel("Duplicate Policy").ok("Accept")).then(function(){m.editFleet(d.fleet,1,d.data)})}))},d.noMoreApplicationsAvailableToAdd=function(){d.data.applications.available.length>0?d.noMoreApplicationsAvailableToAddMsg="You already added all the available applications to the fleet.":d.noMoreApplicationsAvailableToAddMsg="No available applications to the fleet.";var a=0;return d.data.applications.available&&d.data.applications.available.forEach(function(b){
d.data.applications.current&&(d.data.applications.current.indexOf(b)>-1||d.data.applications.deploy.indexOf(b)>-1)||a++}),0===a},d.deleteApplicationFromFleet=function(a){var b;return(b=d.data.applications.deploy.indexOf(a))>-1?(d.data.applications.deploy.splice(b,1),!0):((b=d.data.applications.current.indexOf(a))>-1&&(d.data.applications.remove.push(a),d.data.applications.current.splice(b,1)),!0)},d.addApplicationToFleet=function(a){var b;d.selectedApplicationToAdd=null,a&&(d.data.applications.current.indexOf(a)===-1&&d.data.applications.deploy.indexOf(a)===-1&&d.data.applications.remove.indexOf(a)===-1?d.data.applications.deploy.push(a):(b=d.data.applications.remove.indexOf(a))>-1&&(d.data.applications.remove.splice(b,1),d.data.applications.current.push(a)))};var k=function(){var a=[],b=[],e=[];d.data.policies.virtual.forEach(function(b){d.data.policies.current.map(function(a){return a.id}).indexOf(b.id)===-1&&a.push(b)}),d.data.policies.current.forEach(function(a){var c=d.data.policies.virtual.map(function(a){return a.id}).indexOf(a.id);c===-1?b.push(a):d.data.policies.virtual[c].value!==a.value&&e.push(d.data.policies.virtual[c])});var f={fleetPoliciesIds:c.createPolicies(a,d.fleet.id),deletionCompleted:c.deletePolicies(b),updateCompleted:c.updatePolicies(e)};i.all(f).then(function(b){a.forEach(function(a,c){var e=d.data.policies.virtual.map(function(a){return a.id}).indexOf(a.id);d.data.policies.virtual[e].plugin_flyvemdm_fleet_policy_id=b.fleetPoliciesIds[c].id}),angular.copy(d.data.policies.virtual,d.data.policies.current),angular.equals(d.data.policies.current,m.fleetPolicies[d.fleet.id])||angular.copy(d.data.policies.current,m.fleetPolicies[d.fleet.id])})},l=function(){d.data.applications.deploy.forEach(function(a){var b={plugin_flyvemdm_fleets_id:d.fleet.id,plugin_flyvemdm_policies_id:m.policyToDeployAppId,value:{remove_on_delete:1},itemtype:"PluginFlyvemdmPackage",items_id:a.id};c.createPolicy(b).then(function(b){a.plugin_flyvemdm_fleet_policy_id=b,d.data.applications.current.push(a),angular.equals(d.data.applications.current,m.fleetApps[d.fleet.id])||angular.copy(d.data.applications.current,m.fleetApps[d.fleet.id])})}),d.data.applications.remove.forEach(function(a){c.deletePolicy(a.plugin_flyvemdm_fleet_policy_id).then(function(){angular.equals(d.data.applications.current,m.fleetApps[d.fleet.id])||angular.copy(d.data.applications.current,m.fleetApps[d.fleet.id])})})},o=function(){d.data.files.deploy.forEach(function(a){var b={plugin_flyvemdm_fleets_id:d.fleet.id,plugin_flyvemdm_policies_id:m.policyToDeployFileId,value:{destination:a.destination,remove_on_delete:1},itemtype:"PluginFlyvemdmFile",items_id:a.id};c.createPolicy(b).then(function(b){a.plugin_flyvemdm_fleet_policy_id=b,d.data.files.current.push(a),angular.equals(d.data.files.current,m.fleetFiles[d.fleet.id])||angular.copy(d.data.files.current,m.fleetFiles[d.fleet.id])})}),d.data.files.remove.forEach(function(){angular.equals(d.data.files.virtual,m.fleetFiles[d.fleet.id])||angular.copy(d.data.files.virtual,m.fleetFiles[d.fleet.id])})};d.cancel=function(){a.hide()},d.saveFleet=function(){if(d.fleet.id)e.name!==d.fleet.name&&a.hide().then(function(){c.updateFleet(d.fleet.id,d.fleet.name).then(function(){e.name=d.fleet.name,angular.equals(d.data.policies.virtual,d.data.policies.current)||k(),l(),o()})}),a.hide().then(function(){angular.equals(d.data.policies.virtual,d.data.policies.current)||k(),l(),o()});else{var b={name:d.fleet.name};a.hide().then(function(){c.createFleet(b).then(function(a){m.displayedCollection.push({id:a,name:b.name}),d.fleet.id=a;for(var c in d.data.policies.virtual)d.data.policies.virtual[c].plugin_flyvemdm_fleets_id=d.fleet.id;m.fleetPolicies[d.fleet.id]=[],m.fleetApps[d.fleet.id]=[],m.fleetFiles[d.fleet.id]=[],d.data.policies.current=angular.copy(m.fleetPolicies[d.fleet.id]),d.data.applications.current=angular.copy(m.fleetApps[d.fleet.id]),d.data.files.current=angular.copy(m.fleetFiles[d.fleet.id]),l(),o(),k()})})}}};o.$inject=["$mdDialog","$scope","fleet","selectedTabIndex","data"],f.deleteFleet=function(a){h.show(h.confirm().title("Please confirm deletion").content("Are you certain you want to delete "+a.name).ok("Accept").cancel("Cancel")).then(function(){c.deleteFleet(a.id).then(function(){d.done("Fleet deleted"),m.displayedCollection.some(function(b,c){if(b.id===a.id)return m.displayedCollection.splice(c,1),!0})})})},f.editFleet=function(a,b,c){c||(c={policies:{categories:f.policyCategories,available:f.policies,virtual:angular.copy(f.fleetPolicies[a.id]),current:angular.copy(f.fleetPolicies[a.id]),deploy:[],remove:[]},applications:{available:f.applications,virtual:angular.copy(f.fleetApps[a.id]),current:angular.copy(f.fleetApps[a.id]),deploy:[],remove:[]},files:{available:f.files,virtual:angular.copy(f.fleetFiles[a.id]),current:angular.copy(f.fleetFiles[a.id]),deploy:[],remove:[]}}),h.show({controller:o,templateUrl:"views/dialog_editfleet.html",parent:angular.element(document.body),clickOutsideToClose:!1,locals:{fleet:{id:a.id,name:a.name},selectedTabIndex:b,data:c}})},f.insertIntoTable=f.newFleet=function(){var a={policies:{categories:f.policyCategories,available:f.policies,virtual:[],current:[],deploy:[],remove:[]},applications:{available:f.applications,virtual:[],current:[],deploy:[],remove:[]},files:{available:f.files,virtual:[],current:[],deploy:[],remove:[]}};h.show({controller:o,templateUrl:"views/dialog_editfleet.html",parent:angular.element(document.body),clickOutsideToClose:!1,locals:{fleet:{id:null,name:""},selectedTabIndex:0,data:a}})}}]),angular.module("FlyveMDM").factory("FleetsAdminFac",["GLPI_API_URL","GlpiObjectNames","PluginObjectNames","$q","$http",function(a,b,c,d,e){var f=[];return{createPolicy:function(b){var f=d.defer();return e({method:"POST",url:a+c.FleetPolicy,data:{input:b}}).then(function(a){f.resolve(a.data.id)},function(){f.reject()}),f.promise},updatePolicy:function(b,f){var g=d.defer();return e({method:"PUT",url:a+c.FleetPolicy,data:{input:{id:b,value:f}}}).then(function(){g.resolve()},function(){g.reject()}),g.promise},deletePolicy:function(b){var f=d.defer();return e({method:"DELETE",url:a+c.FleetPolicy+"/"+b}).then(function(){f.resolve()},function(){f.reject()}),f.promise},getPolicies:function(){var b=d.defer();return e({method:"GET",url:a+c.FleetPolicy}).then(function(a){var c=a.data;b.resolve(c)},function(){b.reject()}),b.promise},createPolicies:function(b,f){var g=b.map(function(b){var g=d.defer(),h={plugin_flyvemdm_fleets_id:f,plugin_flyvemdm_policies_id:b.id,value:b.value};return e({method:"POST",url:a+c.FleetPolicy,data:{input:h}}).then(function(a){g.resolve(a.data)},function(){g.reject()}),g.promise});return d.all(g)},deletePolicies:function(b){var f=b.map(function(b){var f=d.defer();return e({method:"DELETE",url:a+c.FleetPolicy+"/"+b.plugin_flyvemdm_fleet_policy_id}).then(function(){f.resolve()},function(){f.reject()}),f.promise});return d.all(f)},updatePolicies:function(b){var f=b.map(function(b){var f=d.defer(),g={id:b.plugin_flyvemdm_fleet_policy_id,value:b.value};return e({method:"PUT",url:a+c.FleetPolicy,data:{input:g}}).then(function(a){f.resolve(a.data)},function(){f.reject()}),f.promise});return d.all(f)},getFleets:function(){var b=d.defer();return f.length>0?b.resolve(f):e({method:"GET",url:a+c.Fleet,params:{range:"0-1000"}}).then(function(a){var c=a.data;b.resolve(c)},function(){b.reject()}),b.promise},getFleetsData:function(){var b={params:{range:"0-1000"}},f={getPoliciesCategory:e.get(a+c.PolicyCategory,b),getPolicies:e.get(a+c.Policy,b),getFleets:e.get(a+c.Fleet,b),getFleetPolicy:e.get(a+c.FleetPolicy,b),getApplications:e.get(a+c.Application,b),getFiles:e.get(a+c.File,b),getWellknownPath:e.get(a+c.WellknownPath)};return d.all(f)},createFleet:function(b){var f=d.defer();return e({method:"POST",url:a+c.Fleet,data:{input:b}}).then(function(a){f.resolve(a.data.id)},function(){f.reject()}),f.promise},updateFleet:function(b,f){var g=d.defer();return e({method:"PUT",url:a+c.Fleet,data:{input:{id:b,value:f}}}).then(function(){g.resolve()},function(){g.reject()}),g.promise},deleteFleet:function(b){var f=d.defer();return e({method:"DELETE",url:a+c.Fleet+"/"+b}).then(function(){f.resolve()},function(){f.reject()}),f.promise}}}]),angular.module("FlyveMDM").controller("AppsAdminCtrl",["AppsAdminFac","PoliciesAdminFac","FleetsAdminFac","Notifications","AuthProvider","$q","$state","$scope","$mdDialog",function(a,b,c,d,e,f,g,h,i){var j=h;if(!e.seemsLogged())return e.showLogin(!0);h.applications=[],h.displayedCollection=[],h.itemsByPage=5;var k=function(b,c){b.lock_submit=!0,b.uploadProgress=0,b.application={alias:""};var e;b.validateFile=function(a){b.lock_submit=!0,b.application.alias="";var c=!1;if(b.errors={show:!1,message:null},a){for(var d,e=/^.*(.apk|.upk)$/g;null!==(d=e.exec(a.name.toLowerCase()));)d.index===e.lastIndex&&e.lastIndex++,c=!0;c?(b.application.alias=a.name,b.lock_submit=!1,setTimeout(function(){document.querySelector('button[type="submit"]').focus()},100)):(b.errors.show=!0,b.errors.message="Invalid file extension (accept only UPK or APK)")}},b.saveApplication=function(f){b.lock_submit=!0,e=a.uploadApplication(f,b.application.alias),e.then(function(b){c.hide().then(function(){d.done("Application uploaded"),a.getApplication(b.data.id).then(function(a){j.displayedCollection.push(a)})})},function(a){a.status===-1?d.error("Upload cancelled"):(b.application={alias:""},b.uploadProgress=0)},function(a){b.uploadProgress=parseInt(100*a.loaded/a.total)})},b.cancel=function(){c.cancel(),e&&e.abort()}};k.$inject=["$scope","$mdDialog"];var l=function(b,c,e){b.lock_submit=!1,b.application=angular.copy(e),b.$watch("application.alias",function(){b.lock_submit=Boolean(b.application.alias.toString()===e.alias.toString())}),b.cancel=function(){c.hide()},b.saveApplication=function(){b.lock_submit=!0,{}.id=b.application.id,a.updateApplication(b.application.id,b.application.alias).then(function(){c.hide().then(function(){d.done("Application edited"),j.displayedCollection.some(function(a){if(a.id===e.id)return a.alias=b.application.alias,!0})})})}};l.$inject=["$scope","$mdDialog","_application"],h.editApplication=function(a,b){i.show({controller:l,targetEvent:a,locals:{_application:b},templateUrl:"views/dialog_editapplication.html",parent:angular.element(document.body),clickOutsideToClose:!1})},h.insertIntoTable=h.newApplication=function(){i.show({controller:k,templateUrl:"views/dialog_newapplication.html",parent:angular.element(document.body),clickOutsideToClose:!1})},h.deleteApplication=function(b,e){i.show(i.confirm().title("Delete application #"+e.id).content("You are going to delete application "+e.id+".").ariaLabel("delete this application").targetEvent(b).ok("Accept").cancel("Cancel")).then(function(){i.show(i.confirm().title("Please confirm deletion from the device").content("Do you want to create a policy to remove the application "+e.id+"?").ariaLabel("policy remove on delete application").ok("Yes").cancel("No")).then(function(){for(var a in h.fleetPolicies)if(a.plugin_flyvemdm_policies_id===h.policyToDeployAppId&&a.items_id===e.id){var b={remove_on_delete:1};c.updatePolicy(a.id,b)}}).finally(function(){a.deleteApplication(e.id).then(function(){d.done("Application deleted"),j.displayedCollection.some(function(a,b){if(a.id===e.id)return j.displayedCollection.splice(b,1),!0})})})})},h.loading=!1;var m=null;h.fillTable=function(d){null===m&&(m=d);var e=d.pagination.start;if(!((e+"-"+(e+d.pagination.number)).indexOf("NaN")>-1)){h.loading=!0;var g=a.getApplications(),i=b.getPolicyToDeployApp(),j=c.getPolicies();f.all([g,i,j]).then(function(a){var b=a[0];h.fleetPolicies=a[2],h.loading=!1,h.displayedCollection=b,h.collectionLength=b.length,d.pagination.totalItemCount=b.length,h.policyToDeployAppId=a[1]})}},h.refreshPaginatedPage=function(){null!==m&&h.updatePaginatedPage(m)}}]),angular.module("FlyveMDM").controller("AboutCtrl",["GLPI_API_URL","PACKAGE","BOWER","DEBUG","BUILD_ID","UserPreferencesFac","$scope",function(a,b,c,d,e,f,g){g.overview=c.description,g.debug=d,g.components=[],f.getGLPiVersion().then(function(a){g.glpiVersion=a}),f.getPluginList().then(function(a){g.pluginList=[],a.forEach(function(a){g.pluginList.push({name:a,version:null}),f.getPluginVersion().then(function(a){var b=g.pluginList.map(function(a){return a.name}).indexOf("flyvemdm");b!==-1&&(g.pluginList[b].version=a)})})});for(var h in c.dependencies)g.components.push({name:h,version:c.dependencies[h].replace(/\^/g,"")});g.webAppVersion=c.version,g.build=e,this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],g.angularVersion=angular.version.full}]),angular.module("FlyveMDM").directive("registrationPasswordConfirmationField",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){a.$watch("input.password",function(){d.$validate()});var e=function(){return a.input.password===d.$viewValue};d.$validators.passwordAndConfirmationAreTheSame=e}}}).controller("LoginCtrl",["$scope","AuthProvider","GlpiObjectNames","GLPI_API_URL","$state","$mdDialog",function(a,b,c,d,e,f){var g=a;a.loginCredentials={email:"",password:""},navigator.credentials&&navigator.credentials.get({password:!0,unmediated:!1}).then(function(b){b&&a.$apply(function(){a.loginCredentials.username=b.id})}),a.storeCredentials=function(a){if(navigator.credentials){var b=new PasswordCredential({id:a.name,password:a.password,name:a.firstname?a.firstname+" "+a.realname:""});return navigator.credentials.store(b)}},a.attemptLogin=function(){b.attemptLogin(a.loginCredentials.username,a.loginCredentials.password).then(function(){a.storeCredentials({name:a.loginCredentials.username,password:a.loginCredentials.password}),e.go("dashboard")},function(){f.show(f.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title("Wrong credentials").content("Wrong credentials were supplied.").ariaLabel("wrong crendentials on login attempt").ok("Accept"))})};var h=function(a,c){a.lock_submit=!1,a.input={name:"",password:"",password2:"",firstname:"",realname:""},a.attemptRegister=function(){a.lock_submit=!0,a.input.name=a.input.username,b.attemptRegister(a.input).then(function(){g.storeCredentials(a.input),a.lock_submit=!1,c.show(c.alert().parent(angular.element(document.body)).clickOutsideToClose(!1).title("Welcome!").content("You account has been created! Go and try to login now").ariaLabel("your account has been created").ok("Accept")).then(function(){e.go("login")})},function(){a.lock_submit=!1})},a.cancel=function(){c.hide()}};h.$inject=["$scope","$mdDialog"],a.openRegistrationDialog=function(a){f.show({controller:h,templateUrl:"views/dialog_register.html",targetEvent:a,clickOutsideToClose:!1})}}]),angular.module("FlyveMDM").controller("FilesAdminCtrl",["FilesAdminFac","Notifications","$scope","$mdDialog",function(a,b,c,d){var e=c;c.displayedCollection=[];var f=function(c,d,f){c.lock_submit=!0,c.file=angular.copy(f),c.$watch("file.name",function(){c.lock_submit=Boolean(c.file.name.toString()===f.name.toString())}),c.cancel=function(){d.hide()},c.saveFile=function(){c.lock_submit=!0,a.updateFile(c.file.id,c.file.name).then(function(){d.hide().then(function(){b.done("File edited"),e.displayedCollection.some(function(a){if(a.id===c.file.id)return a.name=c.file.name,!0})})})}};f.$inject=["$scope","$mdDialog","file"];var g=function(c,d){c.lock_submit=!0,c.uploadProgress=0,c.file={name:""};var f;c.showName=function(a){a.name&&(c.file.name=a.name,c.lock_submit=!1)},c.saveFile=function(g){c.lock_submit=!0,f=a.uploadFile2(g,c.file.name),f.then(function(c){d.hide().then(function(){b.done("File uploaded"),a.getFile(c.data.id).then(function(a){e.displayedCollection.push(a)})})},function(a){a.status===-1?b.error("Upload cancelled"):d.show(d.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title("Error when uploading file").content(a.data[1]).ariaLabel(a.data[1]).ok("Accept"))},function(a){c.uploadProgress=parseInt(100*a.loaded/a.total)})},c.cancel=function(){d.cancel(),f&&f.abort()}};g.$inject=["$scope","$mdDialog"],c.insertIntoTable=c.newFile=function(){d.show({controller:g,templateUrl:"views/dialog_newfile.html",parent:angular.element(document.body),clickOutsideToClose:!1})},c.editFile=function(a,b){d.show({controller:f,targetEvent:a,locals:{file:b},templateUrl:"views/dialog_editfile.html",parent:angular.element(document.body),clickOutsideToClose:!1})},c.deleteFile=function(e,f){d.show(d.confirm().title("Are you certain").content('you want to delete the file "'+f.name+'"').ok("Accept").cancel("Cancel").targetEvent(e)).then(function(){a.deleteFile(f.id).then(function(){b.done("File deleted"),c.displayedCollection.some(function(a,b){if(a.id===f.id)return c.displayedCollection.splice(b,1),!0})})})},c.fillTable=function(b){a.getFiles().then(function(a){c.displayedCollection=a,c.collectionLength=a.length,b.pagination.totalItemCount=a.length})}}]),angular.module("FlyveMDM").factory("FilesAdminFac",["GLPI_API_URL","PluginObjectNames","AuthProvider","Upload","$q","$http",function(a,b,c,d,e,f){return{getFile:function(c){var d=e.defer();return f({method:"GET",url:a+b.File+"/"+c}).then(function(a){var b=a.data,c={};c.id=b.id,c.name=b.name,c.source=b.source,d.resolve(c)},function(){d.reject()}),d.promise},getFiles:function(){var c=e.defer();return f({method:"GET",url:a+b.File}).then(function(a){var b=a.data,d=b.map(function(a){var b={};return b.id=a.id,b.name=a.name,b.source=a.source,b});c.resolve(d)},function(){c.reject()}),c.promise},updateFile:function(c,d){var g=e.defer();return f({method:"PUT",url:a+b.File,data:{input:{id:c,name:d}}}).then(function(){g.resolve()},function(){g.reject()}),g.promise},deleteFile:function(c){var d=e.defer();return f({method:"DELETE",url:a+b.File+"/"+c}).then(function(){d.resolve()},function(){d.reject()}),d.promise},uploadFile:function(f){var g=e.defer();return d.upload({url:a+"/"+b.File,data:{file:f,uploadManifest:JSON.stringify({session_token:c.getCurrentToken(),input:{name:f.name}})}}).then(function(a){g.resolve(a)},function(a){g.resolve(a.status)},function(a){var b=parseInt(100*a.loaded/a.total);g.notify(b)}),g.promise},uploadFile2:function(c,e){return d.upload({url:a+"/"+b.File,data:{file:c,uploadManifest:JSON.stringify({input:{name:e}})}})}}}]),angular.module("FlyveMDM").controller("UsersAdminCtrl",["UsersAdminFac","AgentFac","AuthProvider","Notifications","$scope","$mdDialog",function(a,b,c,d,e,f){if(!c.seemsLogged())return c.showLogin(!0);var g=e;e.displayedCollection=[],e.itemsByPage=5,e.loading=!1,e.fillTable=function(c){a.getUsers().then(function(a){c.pagination.totalItemCount=e.collectionLength=a.length,b.evaluateDeviceNames(a).then(function(a){e.loading=!1,e.displayedCollection=a},function(){})},function(){})};var h=function(b,c,e){b.lock_submit=!1,b.input=angular.extend({},e),b.saveUser=function(){b.lock_submit=!0,a.updateUser(b.input).then(function(){c.hide().then(function(){d.done("User edited"),b.input.fullname=b.input.firstname+" "+b.input.lastname,b.input.password="",b.input.password2="",g.displayedCollection.some(function(a,c){a.id===b.input.id&&(g.displayedCollection[c]=angular.copy(b.input))})})})},b.cancel=function(){c.hide()}};h.$inject=["$scope","$mdDialog","user"],e.editUser=function(a,b){f.show({controller:h,templateUrl:"views/dialog_edituser.html",parent:angular.element(document.body),clickOutsideToClose:!1,targetEvent:a,locals:{user:b}})},e.deleteUser=function(b,c){f.show(f.confirm().targetEvent(b).title("Confirm the deletion of user").content("Are you certain to delete the "+c.email+" device").ok("Accept").cancel("Cancel")).then(function(){a.deleteUser(c.id).then(function(){d.done("User deleted"),g.displayedCollection.some(function(a,b){a.id===c.id&&g.displayedCollection.splice(b,1)})})})};var i=function(b,c){b.lock_submit=!1,b.input={username:"",password:"",password2:"",firstname:"",lastname:""},b.attemptRegister=function(){b.lock_submit=!0,a.attemptRegister(b.input).then(function(a){if(d.done("User created"),b.input.fullname=b.input.firstname+" "+b.input.lastname,navigator.credentials){var c=new PasswordCredential({id:b.input.username,password:b.input.password,name:b.input.fullname});navigator.credentials.store(c)}b.input.id=a,b.input.password="",b.input.password2="",g.displayedCollection.push(b.input)}).finally(function(){b.lock_submit=!1,c.hide()})},b.cancel=function(){c.hide()}};i.$inject=["$scope","$mdDialog"],e.insertIntoTable=function(a){f.show({controller:i,templateUrl:"views/dialog_register.html",targetEvent:a,clickOutsideToClose:!1})}}]),angular.module("FlyveMDM").factory("UsersAdminFac",["GLPI_API_URL","GlpiObjectNames","$q","$http",function(a,b,c,d){var e=!1,f=!1;return{getUser:function(e){var f=c.defer();return d({method:"GET",url:a+b.GlpiUser+"/"+e}).then(function(a){var b=a.data,c={};c.id=b.id,c.username=b.name,c.fullname=b.realname,f.resolve(c)},function(){f.reject()}),f.promise},getUsers:function(){var e=c.defer();return d({method:"GET",url:a+b.GlpiUser,params:{range:"0-1000"}}).then(function(a){var b=a.data.map(function(a){var b={};return b.id=a.id,b.username=a.name,b.firstname=a.firstname,b.lastname=a.realname,a.firstname&&a.realname?b.fullname=a.firstname+" "+a.realname:a.firstname?b.fullname=a.firstname:b.fullname=a.realname,b});e.resolve(b)},function(){e.reject()}),e.promise},updateUser:function(g){var h=c.defer(),i=c.defer(),j={id:g.id,name:g.username,firstname:g.firstname,realname:g.lastname};if(g.password){var k=c.defer();d.get(a+b.FullSession).then(function(a){f=a.session.glpiactive_entity,e=a.session.glpiactiveprofile.id,k.resolve()},function(){k.reject(),h.reject(),i.reject()}),k.promise.then(function(){d({method:"POST",url:a+b.Profile_User,data:{input:{users_id:g.id,profiles_id:e,entities_id:f,is_recursive:0}}}).then(function(){h.resolve()},function(){h.reject(),i.reject()})}),j.password=g.password,j.password2=g.password2}else h.resolve();return h.promise.then(function(){d({method:"PUT",url:a+b.GlpiUser,data:{input:j}}).then(function(){i.resolve()},function(){i.reject()})}),i.promise},deleteUser:function(e){var f=c.defer();return d({method:"DELETE",url:a+b.GlpiUser+"/"+e,data:{force_purge:!0}}).then(function(){f.resolve()},function(){d.get(a+b.Profile_User,{params:{"searchText[users_id]":e}}).then(function(c){var e=c[0].id;d({method:"DELETE",url:a+b.Profile_User+"/"+e,data:{force_purge:!0}}).then(function(){f.resolve()},function(){f.reject()})},function(){f.reject()})}),f.promise},attemptRegister:function(f){var g=c.defer(),h=c.defer();return d.get(a+b.ActiveProfile).then(function(a){e=a.active_profile.id,g.resolve()},function(){g.reject(),h.reject()}),g.promise.then(function(){d({method:"POST",url:a+b.GlpiUser,data:{input:{name:f.username,_profiles_id:e,_useremails:[f.username],firstname:f.firstname,realname:f.lastname,password:f.password,password2:f.password2}}}).then(function(a){h.resolve(a.data.id)},function(){h.reject()})}),h.promise}}}]),angular.module("FlyveMDM").controller("UserPreferencesCtrl",["GLPI_API_URL","AuthProvider","$state","$http","$scope","$rootScope","$mdDialog","GlpiObjectNames","PluginObjectNames","Notifications","EntityConfigFac","DashboardFac","FullSessionFac","UserPreferencesFac","UsersAdminFac","$interval","$q",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=e;e.notificationMsg="For native you need to grant permissions",e.tokenLife=0,e.selectedTab=0,e.user={},e.lock_language=!1,e.lock_save_user=!1,e.dashboard={max_devices:!1,devices:!0,fleets:!0,files:!0,applications:!0,users:!0,invitations:!0,devices_users:!0,devices_os:!0};for(var s in e.dashboard)localStorage.getItem("dashboard_"+s)&&(e.dashboard[s]=JSON.parse(localStorage.getItem("dashboard_"+s)));var t=!localStorage.notificationEnable||JSON.parse(localStorage.notificationEnable),u=localStorage.notificationType?localStorage.notificationType:"Toast";e.notification={type:u,enable:t},e.notifications=["Toast","Native"],e.changeNotificatioType=function(a){"Native"===a?Notification.requestPermission().then(function(a){switch(a){case"granted":e.notification.type="Native",localStorage.setItem("notificationType","Native"),e.notificationMsg="Permission granted for native notifications";break;case"denied":e.notification.type="Toast",localStorage.setItem("notificationType","Toast"),e.notificationMsg="You need manage and re-allow notifications in your web browser";break;default:e.notification.type="Toast",localStorage.setItem("notificationType","Toast"),e.notificationMsg="For native you need to grant permissions"}}):(e.notification.type="Toast",localStorage.setItem("notificationType","Toast"),e.notificationMsg="A toast provides simple feedback about an operation in a small popup")},e.enableNotification=function(a){localStorage.setItem("notificationEnable",a)},e.language={name:"",code:""},e.languages=[{name:"English",code:"en_US"},{name:"French",code:"fr_FR"},{name:"Spanish",code:"es_ES"},{name:"Portuguese",code:"pt_BR"}],e.changeLanguage=function(a){e.lock_language=!0,n.changeLanguage(e.user.id,a.code).then(function(b){JSON.parse(b[0][e.user.id])?(j.done("Language changed"),e.lock_language=!1,e.language=a):e.lock_language=!1},function(){e.lock_language=!1})};var v=d.get(a+h.ActiveEntities);q.all([v]).then(function(b){e.entityId=b[0].data.active_entity.id;var c=k.getConfiguration(e.entityId),f=d.get(a+h.Computer,{range:"0-0"});return q.all([c,f])}).then(function(a){var b=a[0],c=a[1],d=c.headers(),f=d["content-range"];void 0!==f&&(f=f.match(/^(\d+)-(\d+)\/(\d+)$/)[3]),e.deviceLimit=b.device_limit,e.deviceCount=f,e.downloadUrl=b.download_url,e.tokenLife=b.agent_token_life.match(/^P(\d+)D$/)[1]}),e.deviceLimit="",e.deviceCount="",e.editTokenLife=function(a){var b=g.prompt().title("Date Period").textContent("In number of days").placeholder("Days").ariaLabel("Date Period").initialValue(e.tokenLife).targetEvent(a).ok("Save").cancel("Cancel");g.show(b).then(function(a){e.tokenLife=a;var b={agent_token_life:"P"+e.tokenLife+"D"};k.editConfiguration(e.entityId,b).then(function(){j.done("Date period saved")})})},e.changeDownloadUrl=function(a){var b=g.prompt().title("URL of the application").textContent("File extension as apk or upk").placeholder("URL").ariaLabel("URL of the application").initialValue("https://").targetEvent(a).ok("Save").cancel("Cancel");g.show(b).then(function(a){e.downloadUrl=a;var b={download_url:e.downloadUrl};k.editConfiguration(e.entityId,b).then(function(){j.done("URL saved")})})};var w={invitations:l.getInvitations(),users:l.getNumberOfUsers(),devices:l.getNumberOfDevices(),applications:l.getNumberOfApplications(),fleets:l.getNumberOfFleets(),files:l.getNumberOfFiles(),policies:l.getNumberOfPolicies(),categories:l.getNumberOfPolicyCategories()};q.all(w).then(function(a){e.usersCount=a.users,e.devicesCount=a.devices,e.applicationsCount=a.applications,e.fleetsCount=a.fleets,e.filesCount=a.files,e.policiesCount=a.policies,e.categoriesCount=a.categories,e.invitationsCount=a.invitations.total}),m.getSession().then(function(a){var b=a.getFullSession.data.session;e.user.id=b.glpiID,e.currentTime=b.glpi_currenttime,n.getUserInformation(e.user.id).then(function(a){e.user.username=a.name,e.user.phone=a.phone,e.user.phone2=a.phone2,e.user.mobile=a.mobile,e.user.realname=a.realname,e.user.firstname=a.firstname,e.user.last_login=a.last_login,e.user.date_mod=a.date_mod,e.user.date_creation=a.date_creation,e.user.registration_number=a.registration_number,e.language.code=a.language;var b=e.languages.map(function(a){return a.code}).indexOf(e.language.code);b!==-1?e.language.name=e.languages[b].name:e.language={name:"English",code:"en_US"}})}),e.dashboardView=function(){for(var a in e.dashboard)localStorage.setItem("dashboard_"+a,e.dashboard[a])},e.saveUser=function(){e.lock_save_user=!0,n.updateUserInformation(e.user).then(function(a){JSON.parse(a[0][e.user.id])?(j.done("User updated"),e.lock_save_user=!1):e.lock_save_user=!1},function(){e.lock_save_user=!1})};var x=function(a,b,c){a.user=angular.copy(r.user),a.lock_submit=!1,a.cancel=function(){b.cancel()},a.changePassword=function(){a.lock_submit=!0,c.updateMyPassword(a.user.id,a.user.newPassword,a.user.newPassword2).then(function(){if(b.hide(),navigator.credentials){var c=new PasswordCredential({id:a.user.username,password:a.user.newPassword,name:a.user.firstname+" "+a.user.realname});navigator.credentials.store(c)}j.done("Password changed")},function(){a.lock_submit=!1})}};x.$inject=["$scope","$mdDialog","UserPreferencesFac"],e.changePassword=function(a){g.hide().then(function(){g.show({controller:x,targetEvent:a,templateUrl:"views/dialog_changepassword.html",clickOutsideToClose:!0})})},e.disconnect=function(){b.logout().then(function(){b.showLogin()})},e.deleteBrowserData=function(){b.logout().then(function(){localStorage.clear(),window.indexedDB.open("FlyveMDM").onsuccess=function(a){var b=a.target.result;for(var c in b)window.indexedDB.deleteDatabase(b[c])},b.showLogin()})},e.deleteAccount=function(){g.show(g.confirm().title("Please confirm account deletion").content("Are you certain to delete the account?").ariaLabel("delete account").ok("Yes").cancel("No")).then(function(){o.deleteUser(e.user.id).then(function(){j.done("Account deleted"),b.logout().then(function(){b.showLogin()})})})}}]),angular.module("FlyveMDM").factory("UserPreferencesFac",["GLPI_API_URL","GlpiObjectNames","$q","$http",function(a,b,c,d){return{updateMyPassword:function(e,f,g){var h=c.defer();return d.put(a+b.GlpiUser+"/"+e,{input:{password:f,password2:g}}).then(function(a){h.resolve(a)},function(){h.reject()}),h.promise},changeLanguage:function(e,f){var g=c.defer();return d.put(a+b.GlpiUser+"/"+e,{input:{language:f}}).then(function(a){g.resolve(a.data)},function(){g.reject()}),g.promise},updateUserInformation:function(e){var f=c.defer(),g={name:e.name,phone:e.phone,phone2:e.phone2,mobile:e.mobile,realname:e.realname,firstname:e.firstname,registration_number:e.registration_number};return d.put(a+b.GlpiUser+"/"+e.id,{input:g}).then(function(a){f.resolve(a.data)},function(){f.reject()}),f.promise},getUserInformation:function(e){var f=c.defer();return d({method:"GET",url:a+b.GlpiUser+"/"+e}).then(function(a){var b=a.data,c={name:b.name,phone:b.phone,phone2:b.phone2,mobile:b.mobile,realname:b.realname,firstname:b.firstname,language:b.language,last_login:b.last_login,date_mod:b.date_mod,date_creation:b.date_creation,registration_number:b.registration_number,picture:b.picture};f.resolve(c)},function(){f.reject()}),f.promise},getPluginVersion:function(){var e=c.defer();return d({method:"GET",url:a+b.Config,params:{"searchText[name]":"version","searchText[context]":"flyvemdm"}}).then(function(a){var b=a.data,c=b[0].value;e.resolve(c)},function(){e.reject()}),e.promise},getGLPiVersion:function(){var e=c.defer();return d({method:"GET",url:a+b.Config,params:{"searchText[name]":"version","searchText[context]":"core"}}).then(function(a){var b=a.data,c=b[0].value;e.resolve(c)},function(){e.reject()}),e.promise},getPluginList:function(){var e=c.defer();return d({method:"GET",url:a+b.FullSession}).then(function(a){var b=[];for(var c in a.data.session.glpi_plugins)b.push(a.data.session.glpi_plugins[c]);e.resolve(b)},function(){e.reject()}),e.promise}}}]),angular.module("FlyveMDM").factory("FullSessionFac",["GLPI_API_URL","GlpiObjectNames","$q","$http",function(a,b,c,d){return{getSession:function(){var e={getFullSession:d.get(a+b.FullSession)};return c.all(e)}}}]),angular.module("FlyveMDM").directive("faCarets",function(){return{template:'<i class="fa fa-caret-up"></i><i class="fa fa-caret-down"></i>',restrict:"E"}}),angular.module("FlyveMDM").directive("editableTd",function(){return{restrict:"A",template:'<span ng-hide="opened">{{value}}</span><form ng-submit="ctrl.updateValue()" ng-show="opened"><input type="text" ng-model="changedValue" /></form>',link:function(a,b,c,d){var e=b.find("input");d.setValue(a.model()[a.key]),b.on("click",function(){a.opened||(a.opened=!0,a.$apply(),e.focus())}),e.on("blur",function(){a.opened=!1,a.changedValue=a.value,a.$apply()})},controller:["$scope",function(a){a.value=null,
a.changedValue=null,a.opened=!1,this.setValue=function(b){a.value=b,a.changedValue=b},this.updateValue=function(){a.value=a.changedValue,a.opened=!1,a.$parent.$parent.$newValue=a.value,a.onEdit().then(function(){a.model()[a.key]=a.value}),delete a.$parent.$parent.$newValue}}],controllerAs:"ctrl",scope:{initValue:"=editableTdInitValue",onEdit:"&editableTdOnEdit",model:"&editableTdModel",key:"=editableTdKey"}}}),angular.module("FlyveMDM").directive("hasRipple",function(){return{restrict:"A",link:function(a,b,c,d){d.attachRipple(b)},controller:["$scope","$mdInkRipple",function(a,b){this.attachRipple=function(c){b.attach(a,c,{fitRipple:!0})}}]}}),angular.module("FlyveMDM").directive("flyveTable",["$timeout","$q",function(a){return{require:"stTable",link:function(b,c,d,e){var f,g,h,i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,j=angular.element(document.querySelector("html")),k=angular.element(document.body),l=angular.element(document.querySelector("viewport")),m=angular.element(c.parent().parent()),n=e.tableState(),o=n.pagination,p=parseInt(l.css("padding-bottom").split("px")[0]),q=function(){f=c[0].getBoundingClientRect().top+document.querySelector("thead").offsetHeight,g=k[0].clientHeight-f,h=Math.floor(g/50)+3,n.pagination.number=h},r=function(){e.slice(o.start+o.number,o.number)},s=null,t=function(){var b;b=i?j[0].scrollHeight-(j[0].clientHeight+j[0].scrollTop):k[0].scrollHeight-(k[0].clientHeight+k[0].scrollTop);var c=b<=50+p&&0!==b,d=o.start+o.number>=o.totalItemCount;k[0].scrollTop>=f-20?(k.addClass("has-fixed-header"),m.addClass("fixed-header")):(k.removeClass("has-fixed-header"),m.removeClass("fixed-header")),c&&!d&&(null!==s&&a.cancel(s),s=a(function(){r(),s=null},400))},u=null;angular.element(window).on("resize",function(){null!==u&&a.cancel(u),u=a(function(){q();var a=c.find("tbody tr").length;a!==o.totalItemCount&&a<h&&(o.start=0,r())},400)}),q(),angular.element(window).on("scroll",t),b.$on("$destroy",function(){angular.element(window).off("scroll",t)})}}}]),angular.module("FlyveMDM").directive("browseFileButton",function(){return{restrict:"E",template:'<md-button class="md-raised browse-button">Upload File <i class="fa fa-chevron-right"></i></md-button><input type="file" class="browse-button-real" ngf-select ng-model="model" /><div class="current-file">{{model.name}}</div>',link:function(a,b){var c=b.find(".browse-button"),d=b.find(".browse-button-real");c.on("click",function(){d.click()})},scope:{model:"=model"}}}),angular.module("FlyveMDM").directive("loggedUserMenu",function(){return{templateUrl:"views/loggedusermenu.html",restrict:"E",link:function(a){a.opened=!1,a.fabModOpened=!1,angular.element(document.querySelector("nav > ul.menu")).css({}),a.$watch("fabModOpened",function(a){a?angular.element(document.querySelector("nav > ul.menu")).removeClass("fab-usermenu-closed"):angular.element(document.querySelector("nav > ul.menu")).addClass("fab-usermenu-closed")})},scope:{},controller:["$scope","AuthProvider",function(a,b){var c=function(){a.$apply(function(){a.forceClose()})};a.toggleOpened=function(b){b.stopPropagation(),a.opened=!a.opened,a.opened&&angular.element(document.querySelector("html")).on("click",c)},a.forceClose=function(){return a.opened=!1,angular.element(document.querySelector("html")).off("click",c),!0},a.disconnect=function(){b.logout().then(function(){b.showLogin()})},a.$on("$destroy",function(){angular.element(document.querySelector("html")).off("click",c)})}]}}),angular.module("FlyveMDM").factory("InventoryFac",["GLPI_API_URL","GlpiObjectNames","$q","$http",function(a,b,c,d){function e(a){a=parseInt(a);var b=["MB","GB","TB"];if(0===a)return"0 Byte";var c=parseInt(Math.floor(Math.log(a)/Math.log(1024)));return Math.round(a/Math.pow(1024,c),2)+" "+b[c]}var f=Object.freeze({device:{id:null,type:null,model:null,manufacturer:null,serial:null,name:null},network:{technology:null,"2g_bands":null,"3g_bands":null,"4g_bands":null,speed:null,gprs:null,edge:null},date:{creation:null,modification:null,last_report:null,last_contact:null},launch:{announced:null,status:null},body:{dimensions:null,weight:null,sim:null,protection:null},display:{type:null,size:null,resolution:null,multitouch:null,protection:null,others:null},platform:{os:null,chipset:null,cpu:null,gpu:null},applications:[{id:null,application_id:null,category:null,version_name:null}],memory:{card_slot:null,non_volatile:null,volatile:null,partitioning:[{name:null,free_size:null,global_size:null,free_percentage:null,description:null}]},camera:{primary:null,features:null,video:null,secondary:null},sound:{alert_types:null,loudspeaker:null,connections:null},comms:{wlan:{functionality:null,mac:null,speed:null,ip:null,description:null},bluetooth:null,gps:null,nfc:null,radio:null,usb:null},sensors:[{name:null,manufacturer:null,type:null,power:null,version:null}],features:{messaging:null,browser:null,java:null,others:null},battery:{details:null,"stand-by":null,talk_time:null,music_play:null},misc:{colors:null,sar_us:null,sar_eu:null,price_group:null},tests:{performance:null,display:null,camera:null,loudspeaker:null,audio_quality:null,battery_life:null}}),g=[],h=[],i=[],j=[],k=[],l=[],m=[];String.prototype.toTitleCase=function(){return this.replace(/\b(\w+)/g,function(a,b){return b[0].toUpperCase()+b.substr(1).toLowerCase()})};var n=function(){var e=c.defer(),f=c.defer(),j=c.defer();g.length>0?(e.resolve(g),f.resolve(h),j.resolve(i)):(d({method:"GET",url:a+b.Software,params:{range:"0-1000"}}).then(function(a){var b=a.data;e.resolve(b)},function(){e.reject()}),d({method:"GET",url:a+b.SoftwareVersion,params:{range:"0-1000"}}).then(function(a){h=a.data,f.resolve(h)},function(){f.reject()}),d({method:"GET",url:a+b.SoftwareCategory,params:{range:"0-1000"}}).then(function(a){i=a.data,j.resolve(i)},function(){j.reject()}));var k={getSoftware:e.promise,getSoftwareVersion:f.promise,getSoftwareCategory:j.promise};return c.all(k)};return{getComputer:function(g){var h=c.defer();return h.notify("Computer"),d({method:"GET",url:a+b.Computer+"/"+g,params:{get_hateoas:!0,expand_dropdowns:!0,with_networkports:!0,with_disks:!0,with_softwares:!0}}).then(function(i){var j=i.data,k={};m.forEach(function(c){var d={rel:c,href:a+b.Computer+"/"+g+b[c]};j.links.push(d)},this),j.links.forEach(function(a){if(l.indexOf(a.rel)!==-1){var b=c.defer();d({method:"GET",url:a.href,params:{range:"0-1000"}}).then(function(c){h.notify(a.rel),j["_"+a.rel.toLowerCase()]=c.data,b.resolve()},function(){b.reject()}),k[a.rel]=b.promise}},this),k.software=n(),c.all(k).then(function(a){var b=[],c=[],d=[];a.software.getSoftware.forEach(function(a){b[a.id]=a.name}),a.software.getSoftwareVersion.forEach(function(a){c[a.id]=a.name}),a.software.getSoftwareCategory.forEach(function(a){d[a.id]=a.name}),f.device.name=j.name,j.manufacturers_id&&(f.device.manufacturer=j.manufacturers_id.toTitleCase()),f.device.id=j.id,f.device.model=j.computermodels_id,f.device.serial=j.serial,f.device.type=j.computertypes_id,f.platform.os=j.operatingsystems_id+" "+j.operatingsystemversions_id,f.date.creation=j.date_creation,f.date.modification=j.date_mod,j._deviceprocessor&&j._deviceprocessor.length>0&&(f.platform.cpu=j._deviceprocessor[0].designation),j._networkports.NetworkPortEthernet&&(f.comms.wlan.mac=j._networkports.NetworkPortEthernet[0].mac,f.comms.wlan.speed=j._networkports.NetworkPortEthernet[0].speed,f.comms.wlan.description="MAC: "+f.comms.wlan.mac+", Speed: "+f.comms.wlan.speed+" Mb/s",j._networkports.NetworkPortEthernet[0].NetworkName&&j._networkports.NetworkPortEthernet[0].NetworkName.IPAddress&&(f.comms.wlan.ip=j._networkports.NetworkPortEthernet[0].NetworkName.IPAddress[0].name,f.comms.wlan.description=f.comms.wlan.description+", IP: "+f.comms.wlan.ip)),f.applications.shift(),j._softwares.forEach(function(a,d){if(b[a.softwares_id].indexOf(".")!==-1){var e={id:d,application_id:b[a.softwares_id],version_name:c[a.softwareversions_id],category:null};f.applications.push(e)}},this),f.memory.partitioning=[],j._disks.forEach(function(a){var b=Math.floor(a.name.freesize/a.name.totalsize*100),c={name:a.name.device,free_size:a.name.freesize,global_size:a.name.totalsize,free_percentage:b,description:a.name.device+", size "+e(a.name.totalsize)+", free "+e(a.name.freesize)+" ("+b+"%)"};f.memory.partitioning.push(c)},this),h.resolve(f)},function(){h.reject()})},function(){h.reject()}),h.promise},getSoftware:n,getDeviceMemoryType:function(){var e=c.defer();return j.length>0?e.resolve(j):d({method:"GET",url:a+b.DeviceMemoryType,params:{range:"0-1000"}}).then(function(a){j=a.data,e.resolve(j)},function(){e.reject()}),e.promise},getFileSystem:function(){var e=c.defer();return k.length>0?e.resolve(k):d({method:"GET",url:a+b.FileSystem,params:{range:"0-1000"}}).then(function(a){k=a.data,e.resolve(k)},function(){e.reject()}),e.promise}}}]),angular.module("FlyveMDM").constant("PluginObjectNames",{Agent:"/PluginFlyvemdmAgent",Entityconfig:"/PluginFlyvemdmEntityconfig",File:"/PluginFlyvemdmFile",Fleet:"/PluginFlyvemdmFleet",FleetPolicy:"/PluginFlyvemdmFleet_Policy",Geolocation:"/PluginFlyvemdmGeolocation",Invitation:"/PluginFlyvemdmInvitation",InvitationLog:"/PluginFlyvemdmInvitationLog",Application:"/PluginFlyvemdmPackage",Policy:"/PluginFlyvemdmPolicy",PolicyCategory:"/PluginFlyvemdmPolicyCategory",User:"/PluginFlyvemdmdemoUser",WellknownPath:"/PluginFlyvemdmWellknownPath",AccountValidation:"/PluginFlyvemdmdemoAccountvalidation"}),angular.module("FlyveMDM").factory("AgentFac",["GLPI_API_URL","GlpiObjectNames","PluginObjectNames","$q","$http",function(a,b,c,d,e){return{getDevice:function(b){var f=d.defer();return e({method:"GET",url:a+c.Agent+"/"+b}).then(function(a){var b=a.data,c={id:b.id,name:b.name,version:b.version,computers_id:b.computers_id,wipe:b.wipe,lock:b.lock,fleet_id:b.plugin_flyvemdm_fleets_id,last_report:b.last_report,last_contact:b.last_contact,certificate:b.certificate};b.last_contact?c._contacted=moment.utc(b.last_contact).fromNow():c._contacted="Never been contacted",f.resolve(c)},function(){f.reject()}),f.promise},getDevices:function(){var b=d.defer();return e({method:"GET",url:a+c.Agent}).then(function(a){var c=a.data.map(function(a){return{id:a.id,name:a.name,computers_id:a.computers_id}});b.resolve(c)},function(){b.reject()}),b.promise},sendPing:function(b){var f=d.defer(),g=function(a){f.resolve(a)};return{promise:e({method:"PUT",url:a+c.Agent+"/"+b,timeout:f.promise,data:{input:{_ping:""}}}),cancel:g}},requestCurrentGeolocation:function(b){var f=d.defer(),g=function(a){f.resolve(a)};return{promise:e({method:"PUT",url:a+c.Agent+"/"+b,timeout:f.promise,data:{input:{_geolocate:""}}}),cancel:g}},requestCurrentInventory:function(b){var f=d.defer(),g=function(a){f.resolve(a)};return{promise:e({method:"PUT",url:a+c.Agent+"/"+b,timeout:f.promise,data:{input:{_inventory:""}}}),cancel:g}},updateDevice:function(b,f,g){var h=d.defer(),i=function(a){h.resolve(a)},j={};return f&&(j.name=f),g&&(j.plugin_flyvemdm_fleets_id=g),{promise:e({method:"PUT",url:a+c.Agent+"/"+b,timeout:h.promise,data:{input:j}}).then(function(a){return a.data[0][b]}),cancel:i}},wipeDevice:function(b){var f=d.defer(),g=function(a){f.resolve(a)};return{promise:e({method:"PUT",url:a+c.Agent+"/"+b,timeout:f.promise,data:{input:{wipe:1}}}),cancel:g}},deleteDevice:function(b){var f=d.defer(),g=function(a){f.resolve(a)};return{promise:e({method:"DELETE",url:a+c.Agent+"/"+b}),cancel:g}},unenrollDevice:function(b){var f=d.defer(),g=function(a){f.resolve(a)};return{promise:e({method:"PUT",url:a+c.Agent+"/"+b,timeout:f.promise,data:{input:{_unenroll:1}}}),cancel:g}},evaluateDeviceNames:function(b){var f=d.defer(),g={id:2,user_id:6,name:1},h=function(a){return g[a]},i=b.map(function(a){return a.id}),j={};return j["forcedisplay[0]"]=h("id"),j["forcedisplay[1]"]=h("user_id"),j["forcedisplay[2]"]=h("name"),j["forcedisplay[0]"]=6,i.forEach(function(a,b){b>0&&(j["criteria["+b+"][link]"]="OR"),j["criteria["+b+"][field]"]=h("user_id"),j["criteria["+b+"][searchtype]"]="equals",j["criteria["+b+"][value]"]=a}),e({method:"GET",url:a+"/search"+c.Agent,params:j}).then(function(a){var c=a.data.data;for(var d in c){var e=c[d][h("user_id")],g=c[d][h("name")];b.some(function(a){if(a.id===e)return a.device_name=g,!0})}f.resolve(b)},function(){f.reject()}),f.promise}}}]),angular.module("FlyveMDM").constant("GlosaryObjectNames",{"agent.id":null,"computer.id":null,"device.type":null,"device.model":null,"device.manufacturer":null,"device.serial":null,"date.creation":null,"date.modification":null,"date.last_report":null,"date.last_contact":null,"launch.announced":"The time when the device was publicly announced. Sometimes it takes months or even a year for the device to reach the market.\nAgain this is the time the device was ANNOUNCED, not RELEASED.","launch.status":"Coming soon - Announced, but not yet available in stores.\nAvailable - In production, or still can be found new in stores.\nDiscontinued - Not in production, can be found only second hand.\nCancelled - Announced, then officialy cancelled. Rumored - Not officially announced or even confirmed for market release yet","body.dimensions":"The size of the device in format (H x L x W) and the volume of the device where available.\nIf the device has a flip, it is measured with the flip closed.","body.weight":"Lists the weight of the device in grams. Sometimes the manufactures don't list the weight before the handset becomes market available. As usual we try and update the field as frequently as needed.","body.sim":null,"body.protection":null,"display.type":null,"display.size":"The industry standard way of representing display sizes is publishing their length in inches. The screen-to-body ratio is a measure which relates to the size of the screen bezels. The bigger the ratio, the smaller the bezels are, meaning the display takes up a larger area on the device's front.","display.resolution":"The industry standard way of representing screen resolution is publishing the number of pixels that form the two sides of the display rectangle. Usually, the display side that sits at the bottom when you hold the device in your hand is cited first. For the older alphanumeric displays the screen resolution is shown in screen lines or characters per screen line instead. In this case since there will be more pixels per an inch-long line of pixels on the smaller display, the image will look subjectively clearer and more detailed. Hence the importance of the other parameter that we publish - pixel density, which is measured in pixels-per-inch (ppi).","display.multitouch":null,"display.protection":null,"display.others":null,"platform.os":null,"platform.chipset":null,"platform.cpu":null,"platform.gpu":null,"memory.card_slot":null,"memory.non_volatile":null,"memory.volatile":null,"memory.partitioning":null,"camera.primary":null,"camera.features":null,"camera.video":null,"camera.secondary":null,"sound.alert_types":null,"sound.loudspeaker":null,"sound.connections":null,"network.technology":null,"network['2g_bands']":null,"network['3g_bands']":null,"network['4g_bands']":null,"network.speed":null,"network.gprs":null,"network.edge":null,"comms.wlan":null,"comms.bluetooth":null,"comms.gps":null,"comms.nfc":null,"comms.radio":null,"comms.usb":null,"sensors.type":null,"sensors.manufacturer":null,"features.messaging":null,"features.browser":null,"features.java":null,"features.others":null,"battery.details":null,"battery.['stand-by']":null,"battery.talk_time":null,"battery.music_play":null,"misc.colors":"Lists all the available optional color schemes the handset is available in.","misc.sar_us":null,"misc.sar_eu":null,"misc.price_group":"Mobile device prices are dynamic and change every day. We can't monitor the prices of the thousands of models in our database on a daily basis. Instead, we are showing reference pricing information, which can be used for comparison purposes. If you want to know the exact price of a device, please log on to the websites listed in the Check Price list below the device image.","tests.performance":null,"tests.display":null,"tests.camera":null,"tests.loudspeaker":null,"tests.audio_quality":null,"tests.battery_life":null}),angular.module("FlyveMDM").factory("GeolocationFac",["GLPI_API_URL","GlpiObjectNames","PluginObjectNames","$q","$http",function(a,b,c,d,e){return{getDeviceGeolocations:function(b,f,g){var h=d.defer(),i={id:2,name:1,computer_id:3,latitude:4,longitude:5,date:6},j=function(a){return i[a]};return e({method:"GET",url:a+"/search"+c.Geolocation,params:{order:"DESC",sort:j("date"),"forcedisplay[0]":j("latitude"),"forcedisplay[1]":j("longitude"),"forcedisplay[2]":j("date"),"forcedisplay[3]":j("id"),"criteria[0][field]":j("computer_id"),"criteria[0][type]":"equals","criteria[0][value]":b,range:f+"-"+g}}).then(function(a){a.data=a.data.data;var b=[];a.data&&a.data.forEach(function(a){b.push({id:parseInt(a[j("id")]),displayable:{lat:parseFloat(a[j("latitude")]),lng:parseFloat(a[j("longitude")])},date:a[j("date")],timeAgo:moment.utc(a[j("date")]).fromNow(),displayed:"timeAgo"})}),a.data=b.sort(function(a,b){var c=-moment(a.date).unix(),d=-moment(b.date).unix();return c<d?-1:c>d?1:0}),h.resolve(a)},function(){h.reject()}),h.promise},requestCurrentGeolocation:function(b){var f=d.defer();return e({method:"PUT",url:a+c.Agent+"/"+b,data:{input:{_geolocate:""}}}).then(function(){f.resolve()},function(){f.reject()}),f.promise}}}]),angular.module("FlyveMDM").factory("AppsAdminFac",["GLPI_API_URL","PluginObjectNames","AuthProvider","Upload","$q","$http",function(a,b,c,d,e,f){function g(a){a=parseInt(a);var b=["Bytes","KB","MB","GB","TB"];if(0===a)return"0 Byte";var c=parseInt(Math.floor(Math.log(a)/Math.log(1024)));return Math.round(a/Math.pow(1024,c),2)+" "+b[c]}return{getApplication:function(c){var d=e.defer();return f({method:"GET",url:a+b.Application+"/"+c}).then(function(a){var b=a.data;b.filesize=g(b.filesize),b.type=b.dl_filename.substring(b.dl_filename.lastIndexOf(".")+1,b.dl_filename.length),d.resolve(b)},function(){d.reject()}),d.promise},getApplications:function(){var c=e.defer();return f({method:"GET",url:a+b.Application}).then(function(a){var b=a.data,d=b.map(function(a){var b={};return b.id=a.id,b.icon=a.icon,b.alias=a.alias,b.name=a.name,b.version=a.version,b.filesize=g(a.filesize),b.type=a.dl_filename.substring(a.dl_filename.lastIndexOf(".")+1,a.dl_filename.length),b});c.resolve(d)},function(){c.reject()}),c.promise},updateApplication:function(c,d){var g=e.defer();return f({method:"PUT",url:a+b.Application,data:{input:{id:c,alias:d}}}).then(function(){g.resolve()},function(){g.reject()}),g.promise},deleteApplication:function(c){var d=e.defer();return f({method:"DELETE",url:a+b.Application+"/"+c}).then(function(){d.resolve()},function(){d.reject()}),d.promise},uploadApplication:function(c,e){return d.upload({url:a+b.Application,data:{file:c,uploadManifest:JSON.stringify({input:{alias:e}})}})}}}]),angular.module("FlyveMDM").factory("software",function(){return{someMethod:function(){return 42}}}),angular.module("FlyveMDM").factory("PoliciesAdminFac",["GLPI_API_URL","PluginObjectNames","$q","$http",function(a,b,c,d){function e(a,b){return a[a.map(function(a){return a.symbol}).indexOf(b)].id}function f(a){return l[l.map(function(a){return a.id}).indexOf(a)]}function g(a){return m[m.map(function(a){return a.id}).indexOf(a)]}function h(a){var b={};return b.id=a.id,b.name=a.name,b.type=a.type,b.type_data=a.type_data,b.categories_id=a.plugin_flyvemdm_policycategories_id,b.description=a.comment,b.recommended_value=a.recommended_value,b}function i(a){var b={};return b.id=a.plugin_flyvemdm_policycategories_id,b.name=a.name,b}function j(a){return l=a.map(function(a){return h(a)})}function k(a){return m=a.map(function(a){return i(a)}),l}var l=[],m=[];return{getPolicy:function(e){var g=c.defer();return l.length>0?g.resolve(f(e)):d({method:"GET",url:a+b.Policy+"/"+e}).then(function(a){g.resolve(h(a.data))},function(){g.reject()}),g.promise},getPolicies:function(){var e=c.defer();return d({method:"GET",url:a+b.Policy}).then(function(a){e.resolve(j(a.data))},function(){e.reject()}),e.promise},getPolicyToDeployApp:function(){var f=c.defer();if(l.length>0){var g=e(l,"deployApp");f.resolve(g)}else d({method:"GET",url:a+b.Policy}).then(function(a){f.resolve(e(a.data,"deployApp"))},function(){f.reject()});return f.promise},getPolicyToRemoveApp:function(){var f=c.defer();if(l.length>0){var g=e(l,"removeApp");f.resolve(g)}else d({method:"GET",url:a+b.Policy}).then(function(a){f.resolve(e(a.data,"removeApp"))},function(){f.reject()});return f.promise},createPolicy:function(e){var f=c.defer();return d({method:"POST",url:a+b.Policy,data:{input:e}}).then(function(){f.resolve()},function(){f.reject()}),f.promise},deletePolicy:function(e){var f=c.defer();return d({method:"DELETE",url:a+b.Policy+"/"+e}).then(function(){f.resolve()},function(){f.reject()}),f.promise},getCategory:function(e){var f=c.defer();return l.length>0?f.resolve(g(e)):d({method:"GET",url:a+b.PolicyCategory+"/"+e}).then(function(a){f.resolve(i(a.data))},function(){f.reject()}),f.promise},getCategories:function(){var e=c.defer();return d({method:"GET",url:a+b.PolicyCategory}).then(function(a){e.resolve(k(a.data))},function(){e.reject()}),e.promise},createCategory:function(e){var f=c.defer();return d({method:"POST",url:a+b.PolicyCategory,data:{input:e}}).then(function(){f.resolve()},function(){f.reject()}),f.promise},deleteCategory:function(e){var f=c.defer();return d({method:"DELETE",url:a+b.PolicyCategory+"/"+e}).then(function(){f.resolve()},function(){f.reject()}),f.promise}}}]),angular.module("FlyveMDM").factory("DashboardFac",["GLPI_API_URL","GlpiObjectNames","PluginObjectNames","AgentFac","UsersAdminFac","ComputersFac","$q","$http",function(a,b,c,d,e,f,g,h){function i(a){var b=a.split("/"),c={paginationFrom:parseInt(b[0]),paginationTotal:parseInt(b[1])};return c.paginationSubTotal=parseInt(c.paginationTo-c.paginationFrom),c}return{getAndroidVersions:function(){var c=g.defer();return h({method:"GET",url:a+b.Computer,params:{expand_dropdowns:!0,range:"0-1000"}}).then(function(a){var b=a.data,d={android_version:[],android_version_quantity:[]},e=[],f={};b.map(function(a){var b={};return b.operatingsystemversion=a.operatingsystemversions_id,b.operatingsystem=a.operatingsystems_id,b.serial=a.serial,b.computermodel=a.computermodels_id,b.name=a.name,b.id=a.id,b}).forEach(function(a){"Android"===a.operatingsystem&&e.push(a.operatingsystemversion)}),e.forEach(function(a){f[a]=(f[a]||0)+1});for(var g in f)d.android_version_quantity.push(f[g]);d.android_version=Object.keys(f),c.resolve(d)},function(){c.reject()}),c.promise},getInvitations:function(){var b=g.defer(),d={status:"pending"},e={status:"done"};return h({method:"GET",url:a+c.Invitation}).then(function(a){var c=a.data.filter(function(a){return Object.keys(d).every(function(b){return a[b]===d[b]})}),f=a.data.filter(function(a){return Object.keys(e).every(function(b){return a[b]===e[b]})}),g=0;a.headers()["content-range"]&&(g=i(a.headers()["content-range"]).paginationTotal),console.log(g);var h={done:f.length,pending:c.length,total:g};b.resolve(h)},function(){b.reject()}),b.promise},getNumberOfUsers:function(){var c=g.defer();return h({method:"GET",params:{range:"0-0"},url:a+b.GlpiUser}).then(function(a){var b=0;a.headers()["content-range"]&&(b=i(a.headers()["content-range"]).paginationTotal),console.log(b),c.resolve(b)},function(){c.reject()}),c.promise},getNumberOfPolicies:function(){var b=g.defer();return h({method:"GET",params:{range:"0-0"},url:a+c.Policy}).then(function(a){var c=0;a.headers()["content-range"]&&(c=i(a.headers()["content-range"]).paginationTotal),console.log(c),b.resolve(c)},function(){b.reject()}),b.promise},getNumberOfPolicyCategories:function(){var b=g.defer();return h({method:"GET",params:{range:"0-0"},url:a+c.PolicyCategory}).then(function(a){var c=0;a.headers()["content-range"]&&(c=i(a.headers()["content-range"]).paginationTotal),console.log(c),b.resolve(c)},function(){b.reject()}),b.promise},getNumberOfFiles:function(){var b=g.defer();return h({method:"GET",params:{range:"0-0"},url:a+c.File}).then(function(a){var c=0;a.headers()["content-range"]&&(c=i(a.headers()["content-range"]).paginationTotal),console.log(c),b.resolve(c)},function(){b.reject()}),b.promise},getNumberOfFleets:function(){var b=g.defer();return h({method:"GET",params:{range:"0-0"},url:a+c.Fleet}).then(function(a){var c=0;a.headers()["content-range"]&&(c=i(a.headers()["content-range"]).paginationTotal),console.log(c),b.resolve(c)},function(){b.reject()}),b.promise},getNumberOfApplications:function(){var b=g.defer();return h({method:"GET",params:{range:"0-0"},url:a+c.Application}).then(function(a){var c=0;a.headers()["content-range"]&&(c=i(a.headers()["content-range"]).paginationTotal),console.log(c),b.resolve(c)},function(){b.reject()}),b.promise},getNumberOfDevices:function(){var b=g.defer();return h({method:"GET",params:{range:"0-0"},url:a+c.Agent}).then(function(a){var c=0;a.headers()["content-range"]&&(c=i(a.headers()["content-range"]).paginationTotal),console.log(c),b.resolve(c)},function(){b.reject()}),b.promise},getMacAddress:function(){var c=g.defer();return h({method:"GET",params:{range:"0-0"},url:a+b.NetworkPort}).then(function(d){var e=0;d.headers()["content-range"]&&(e=i(d.headers()["content-range"]).paginationTotal),console.log(e),h({method:"GET",params:{range:"0-"+e},url:a+b.NetworkPort}).then(function(a){var b=a.data.map(function(a){return{id:a.items_id,mac:a.mac.toUpperCase()}});c.resolve(b)},function(){c.reject()})},function(){c.reject()}),c.promise},getDevicesByRealName:function(){var a=g.defer(),b={users:e.getUsers(),devices:d.getDevices(),computers:f.getComputers()};return g.all(b).then(function(b){var c=b.users.map(function(a){return a.email}),d=b.computers.map(function(a){return a.id}),e=b.devices.map(function(a){var e={};e.id=a.id;var f=d.indexOf(a.computers_id);if(f!==-1){var g=b.computers[f],h=c.indexOf(g.email);h!==-1&&null!==b.users[h].realname?e.realname=b.users[h].realname:e.realname=a.name}else e.realname=a.name;return e});a.resolve(e)}),a.promise}}}]),angular.module("FlyveMDM").service("Notifications",["$mdToast",function(a){this.done=function(b){var c=!localStorage.notificationEnable||JSON.parse(localStorage.notificationEnable),d=localStorage.notificationType?localStorage.notificationType:"Toast";if(c)switch(d){case"Native":var e={body:b,icon:"images/stupid-user-avatar.png"},f=new Notification("FlyveMDM",e);return setTimeout(f.close.bind(f),2e3),f;case"Toast":var g=a.simple().textContent(b).action("CLOSE").highlightAction(!0).highlightClass("md-primary").position("top right").hideDelay(2e3).capsule(!0);return a.show(g)}},this.loading=function(b,c){var d=!localStorage.notificationEnable||JSON.parse(localStorage.notificationEnable),e=localStorage.notificationType?localStorage.notificationType:"Toast";if(d)switch(e){case"Native":var f={body:b,icon:"images/stupid-user-avatar.png"};return new Notification("FlyveMDM",f);case"Toast":var g=a.simple().textContent(b).action("CANCEL").highlightAction(!0).highlightClass("md-accent").position("top right").capsule(!0).hideDelay(!1);a.show(g).then(function(a){"ok"===a&&c&&c("User cancelled")})}},this.error=function(b){switch(localStorage.notificationType?localStorage.notificationType:"Toast"){case"Native":var c={body:b,icon:"images/stupid-user-avatar.png"};return new Notification("FlyveMDM",c);case"Toast":var d=a.simple().textContent(b).action("CLOSE").highlightAction(!0).highlightClass("md-warn").position("top right").capsule(!0).hideDelay(!1);return a.show(d)}},this.update=function(b){a.updateTextContent(b)},this.hide=function(b){a.hide(b)}}]),angular.module("FlyveMDM").factory("ComputersFac",["GLPI_API_URL","GlpiObjectNames","$q","$http",function(a,b,c,d){return{getComputers:function(){var e=c.defer();return d({method:"GET",url:a+b.Computer}).then(function(a){var b=a.data,c=b.map(function(a){var b={};return b.id=a.id,b.email=a.name,b.realname=a.realname,b});e.resolve(c)},function(){e.reject()}),e.promise}}}]),function(){function a(){return{setOptions:function(a,d){d?b[a]=angular.merge(b[a]||{},d):(d=a,b=angular.merge(b,d)),b=function(a,b){if(a.global.url){if(!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(a.global.url))throw new Error(b.invalid_url);"/"!==a.global.url.substr(-1)&&(a.global.url=a.global.url+"/"),a.global.url=a.global.url}return a}(b,c.defaults.error_msg),angular.merge(c.defaults,b)},$get:function(){return a}}}var b={},c={defaults:{global:{url:null,user_token:null,app_token:null,max_range:"0-1000",expand_dropdowns:!1,get_hateoas:!0,only_id:!1,sort:1,order:"ASC",get_sha1:!1,with_infocoms:!1,with_contracts:!1,with_documents:!1,with_tickets:!1,with_problems:!1,with_changes:!1,with_notes:!1,with_logs:!1},computer:{with_components:!1,with_disks:!1,with_softwares:!1,with_connections:!1,with_networkports:!1},error_msg:{invalid_url:["ERROR_INVALID_URL",""],invalid_item_type:["ERROR_ITEM_NOT_FOUND",""],invalid_range:["ERROR_INVALID_RANGE",""],invalid_authorization:["ERROR_INVALID_AUTHORIZATION",""]}},getOptions:function(a){var c=a&&b[a]||{};return angular.extend({},b,c)}};angular.module("ngGLPi",[]).provider("Glpi",a).service("GLPi",["$q","$http",function(a,b){function d(a){return new RegExp("/^d+-d+|*$/").test(a)}var e=null,f=c.defaults.error_msg,g=c.defaults.global.url,h=c.defaults.global.app_token,i=c.defaults.global.max_range,j={init_session:"initSession",kill_session:"killSession",get_my_profiles:"getMyProfiles",get_active_profile:"getActiveProfile",change_active_profile:"changeActiveProfile",get_my_entities:"getMyEntities",get_active_entities:"getActiveEntities",change_active_entities:"changeActiveEntities",get_full_session:"getFullSession",get_multiple_items:"getMultipleItems",list_search_options:"listSearchOptions",search_items:"search"};return String.prototype.toConcatSlash=function(){return"/"!==this.substr(-1)?this+"/":this},{getOptions:function(a){return c.getOptions(a)},initsession:function(c){var d=a.defer(),i={};if(i["Content-Type"]="application/json",!c)throw new Error(f.invalid_authorization);return c.basic&&(i.Authorization="Basic "+window.btoa(c.login+":"+c.password)),c.user_token&&(i.Authorization="user_token "+c.user_token),c.app_token&&(i["App-Token"]=c.app_token,h=c.app_token),b({method:"GET",url:g+j.initsession,headers:i,data:{}}).then(function(a){e=a.data.session_token,d.resolve(e)},function(a){d.reject(a)}),d.promise},killsession:function(){var c=a.defer(),d={};return d["Content-Type"]="application/json",d["Session-Token"]=this.sessionToken,h&&(d["App-Token"]=this.AppToken),b({method:"GET",url:g+j.killsession,headers:d,data:{}}).then(function(){c.resolve()},function(a){c.reject(a)}),c.promise},getMyProfiles:function(){},getActiveProfile:function(){},changeActiveProfile:function(){},getMyEntities:function(){},getActiveEntities:function(){},changeActiveEntities:function(){},getFullSession:function(){},getAnItem:function(){},getAllItems:function(c,e){var h=a.defer();if(e&&!d(e))throw new Error(f.invalid_range);return b({method:"GET",url:g.toConcatSlash()+c,params:{range:e?e:i},data:{}}).then(function(a){h.resolve(a)},function(a){h.reject(a)}),h.promise},getSubItems:function(){},getMultipleItems:function(){},listSearchOptions:function(c,e){var h=a.defer();if(e&&!d(e))throw new Error(f.invalid_range);var k={};k[c.toString()]="&id,name,table,field,datatype,available_searchtypes,uid",console.log(k);var l=new Dexie("FlyveMDM");l.version(1).stores({agent:"&id,name,table,field,datatype,available_searchtypes,uid"}),l.on("ready",function(){return l.agent.count(function(a){if(!(a>0))return console.log("Database is empty. Populating from ajax call..."),new Dexie.Promise(function(a,d){b({method:"GET",url:g.toConcatSlash()+j.list_search_options+"/"+c,params:{range:e?e:i},data:{}},function(a,b){d(b)}).then(function(b){a(b)})}).then(function(a){
return console.log("Got ajax response. We'll now add the objects."),l.transaction("rw",l.agent,function(){for(var b in a)Number.isInteger(parseInt(b))&&(a[b].id=b,l.agent.add(a[b]))})}).then(function(){console.log("Transaction committed")});console.log("Already populated")})}),l.open();var m=[];return l.agent.each(function(a){m.push(a)}).then(function(){h.resolve(m)}).catch(function(a){h.reject(a),console.error(a.stack||a)}),h.promise},searchItems:function(){},addItems:function(){},updateItems:function(){},deleteItems:function(){}}}])}(),angular.module("FlyveMDM").constant("PACKAGE",{name:"@teclib/flyve-mdm-web-ui",version:"2.1.0",description:"Mobile device management software.",homepage:"https://flyve-mdm.com/",devDependencies:{grunt:"^1.0.1","grunt-angular-templates":"^1.1.0","grunt-autoprefixer":"^3.0.4","grunt-concurrent":"^2.3.1","grunt-contrib-clean":"^1.0.0","grunt-contrib-compass":"^1.1.1","grunt-contrib-concat":"^1.0.1","grunt-contrib-connect":"^1.0.2","grunt-contrib-copy":"^1.0.0","grunt-contrib-cssmin":"^1.0.2","grunt-contrib-htmlmin":"^2.1.0","grunt-contrib-imagemin":"^1.0.1","grunt-contrib-jshint":"^1.1.0","grunt-contrib-uglify":"^2.0.0","grunt-contrib-watch":"^1.0.0","grunt-filerev":"^2.3.1","grunt-gh-pages":"^2.0.0","grunt-git":"^1.0.3","grunt-htmlhint-plus":"^0.4.2","grunt-karma":"^2.0.0","grunt-newer":"^1.2.0","grunt-ng-annotate":"^3.0.0","grunt-ng-constant":"^2.0.1","grunt-sass-lint":"^0.2.2","grunt-svgmin":"^4.0.0","grunt-usemin":"^3.1.1","grunt-wiredep":"^3.0.1","jasmine-core":"^2.5.2","jit-grunt":"^0.10.0","jshint-stylish":"^2.2.1",karma:"^1.4.0","karma-coverage":"^1.1.1","karma-jasmine":"^1.1.0","karma-phantomjs-launcher":"^1.0.2",markdownlint:"^0.3.1",newman:"^3.4.2","phantomjs-prebuilt":"^2.1.14","sass-lint":"^1.10.2","serve-static":"^1.11.2","time-grunt":"^1.4.0"},engines:{node:">=0.10.0"},scripts:{test:"grunt test",start:"npm i & bower i & grunt build & grunt serve",watch:"grunt serve",release:"standard-version --sign --message 'chore(release): bump to %s and new CHANGELOG'",debug:"node --nolazy --debug-brk=5858 node_modules/grunt/bin/grunt serve"},keywords:["flyve","uhuru","mdm","mobile","device","management"],authors:[{name:"Nelson Zamith",email:"nzamith@teclib.com"},{name:"Alexander Salas Bastidas",email:"asalas@teclib.com"}],license:"AGPL-3.0",ignore:["**/.*","node_modules","bower_components","jspm_packages","tmp","temp","test","tests","dist",".tmp",".gtm",".vscode",".sass-cache","app/config.js"],repository:{type:"git",url:"git+https://github.com/flyve-mdm/flyve-mdm-web-ui.git"},bugs:{url:"https://github.com/flyve-mdm/flyve-mdm-web-ui/issues"},private:!0,dependencies:{}}).constant("BOWER",{name:"flyve-mdm-web-ui",version:"2.1.0",description:"Mobile device management software.",homepage:"https://flyve-mdm.com/",main:["app/scripts/app.js","app/styles/app.scss"],appPath:"app",moduleName:"FlyveMDM",moduleType:["globals"],keywords:["flyve","uhuru","mdm","mobile","device","management"],authors:[{name:"Nelson Zamith",email:"nzamith@teclib.com"},{name:"Alexander Salas Bastidas",email:"asalas@teclib.com"}],license:"AGPL-3.0",ignore:["**/.*","node_modules","bower_components","jspm_packages","tmp","temp","test","tests","dist",".tmp",".gtm",".vscode",".sass-cache","app/config.js"],repository:{type:"git",url:"git+https://github.com/flyve-mdm/flyve-mdm-web-ui.git"},private:!0,dependencies:{angular:"^1.6.2","angular-animate":"^1.6.2","angular-cookies":"^1.6.2","angular-resource":"^1.6.2","angular-route":"^1.6.2","angular-sanitize":"^1.6.2","angular-material":"^1.1.3","angular-ui-router":"^0.4.2","angular-smart-table":"^2.1.8","components-font-awesome":"^4.7.0","ng-file-upload":"^12.2.13","open-sans-fontface":"^1.4.2",moment:"^2.17.1","angular-material-accordion":"^1.0.5",leaflet:"^1.0.3","angular-chart.js":"^1.1.1",dexie:"^1.5.1"},devDependencies:{"angular-mocks":"^1.6.2"},resolutions:{angular:"1.6.0"}}).value("debug",!0),angular.module("FlyveMDM").factory("EntityConfigFac",["GLPI_API_URL","PluginObjectNames","$q","$http",function(a,b,c,d){return{editConfiguration:function(e,f){var g=c.defer();return d({method:"PUT",url:a+b.Entityconfig+"/"+e,data:{input:f}}).then(function(a){g.resolve(a.data.data[0])},function(){g.reject()}),g.promise},getConfiguration:function(e){var f=c.defer();return d({method:"GET",url:a+b.Entityconfig+"/"+e}).then(function(a){f.resolve(a.data)},function(){f.reject()}),f.promise},getConfigurations:function(){var e=c.defer();return d({method:"GET",url:a+b.Entityconfig}).then(function(a){e.resolve(a.data)},function(){e.reject()}),c.all(e.promise)}}}]),angular.module("FlyveMDM").controller("ContactCtrl",["$scope","$window","AuthProvider",function(a,b,c){if(!c.seemsLogged())return c.showLogin(!0);a.links=function(a){switch(a){case"tel":b.open("tel:+34512702140","_blank");break;case"email":b.open("mailto:contact@teclib.com","_blank");break;case"map":b.open("https://her.is/2ge9vcS","_blank");break;case"ticket":b.open("https://support.teclib.com/","_blank")}}}]),angular.module("FlyveMDM").factory("AccountFac",["GLPI_API_URL","PluginObjectNames","AuthProvider","$q","$http",function(a,b,c,d,e){return{validateAccount:function(f,g){var h=d.defer();return c.getTempSessionToken().then(function(c){e({method:"PUT",url:a+b.AccountValidation,data:{input:{id:f,_validate:g}},headers:{"Session-Token":c}}).then(function(a){h.resolve(a.data)},function(){h.reject()})},function(){h.reject()}),h.promise}}}]),angular.module("FlyveMDM").controller("AccountValidationCtrl",["$scope","AuthProvider","AccountFac","Notifications","$state","$stateParams",function(a,b,c,d,e,f){a.lock_submit=!1,a.show_login=!1,a.validateAccount=function(){a.lock_submit=!0,c.validateAccount(f.id,f.hash).then(function(){d.done("Account validated"),a.show_login=!0},function(){a.lock_submit=!1})},a.goToLogin=function(){e.go("login")}}]),angular.module("FlyveMDM").run(["$templateCache",function(a){a.put("views/about.html",'<div class="view about-panel" ng-cloak="true"> <h2 class="collection-infos"> About </h2> <div class="table-container about-page"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span class="about-title">About</span></p> </div> <md-tabs md-dynamic-height="true" md-selected="0"> <md-tab> <md-tab-label>Overview</md-tab-label> <md-tab-body> <md-content> <p>Flyve MDM is a mobile device management software (SaaS) that enables you to secure and manage all the mobile devices of your business via a unique web-based console (MDM).</p> <br> <p>Our solution allows you to efficiently and easily control any aspects of your Android-based mobile fleet, providing a panel of functionalities:</p> <br> <ul> <li> Provided as a SaaS platform</li> <li> Google independent</li> <li> Deploy and configure applications</li> <li> Deploy files</li> <li> Wipe a device</li> <li> Work with devices running Android 4.4 or higher</li> <li> Simple web application user interface</li> </ul> <br> <p>Source codes will be released during fall 2016.</p> <br> </md-content> </md-tab-body> </md-tab> <md-tab> <md-tab-label>System Information</md-tab-label> <md-tab-body> <md-content class="system-information"> <md-subheader class="md-no-sticky">System sumary</md-subheader> <md-list-item class="secondary-button-padding"> <p>Admin console</p> <p class="md-secondary">{{webAppVersion}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>Build</p> <p class="md-secondary">{{build}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>GLPi core</p> <p class="md-secondary">{{glpiVersion}}</p> </md-list-item> <md-subheader class="md-no-sticky">GLPi Plugins</md-subheader> <md-list-item class="secondary-button-padding" ng-repeat="plugin in pluginList"> <p>{{plugin.name}}</p> <p class="md-secondary">{{plugin.version}}</p> </md-list-item> <md-subheader class="md-no-sticky">Components</md-subheader> <md-list-item class="secondary-button-padding" ng-repeat="component in components"> <p>{{component.name}}</p> <p class="md-secondary">{{component.version}}</p> </md-list-item> <md-subheader class="md-no-sticky">Software Environment</md-subheader> <md-list-item class="secondary-button-padding"> <p>Debug</p> <p class="md-secondary">{{debug}}</p> </md-list-item> <md-divider></md-divider> </md-content> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Release Notes</md-tab-label> <md-tab-body> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Terms of use</md-tab-label> <md-tab-body> <iframe src="tos.html" class="license" frameborder="0" width="100%"> <p>Your browser does not support iframes.</p> </iframe> </md-tab-body> </md-tab> <md-tab> <md-tab-label>License</md-tab-label> <md-tab-body> <iframe src="license.html" class="license" frameborder="0" width="100%"> <p>Your browser does not support iframes.</p> </iframe> </md-tab-body> </md-tab> </md-tabs> </div> </div> </div>'),a.put("views/account.html",'<div class="view account-panel" ng-cloak="true"> <h2 class="collection-infos"> Account Settings </h2> <div class="table-container account-page"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span class="account-title">Account Settings</span></p> </div> <md-tabs md-dynamic-height="true" md-selected="selectedTab"> <md-tab> <md-tab-label>Entity</md-tab-label> <md-tab-body> <md-list flex="true"> <md-subheader class="md-no-sticky">Agent</md-subheader> <md-list-item class="secondary-button-padding"> <p>Token life</p> <md-button class="md-secondary md-primary" ng-click="editTokenLife($event)">{{tokenLife}} days</md-button> </md-list-item> <md-list-item class="md-2-line"> <div class="md-list-item-text"> <h3>Download URL</h3> <p>{{downloadUrl}}</p> </div> <md-button class="md-secondary md-primary" ng-click="changeDownloadUrl($event)">Change</md-button> </md-list-item> <md-subheader class="md-no-sticky">Configuration</md-subheader> <md-list-item class="secondary-button-padding"> <p>Entity ID</p> <p class="md-secondary">{{entityId}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>Maximum managed devices</p> <p class="md-secondary">{{deviceLimit}}</p> </md-list-item> <md-subheader class="md-no-sticky">General information</md-subheader> <md-list-item class="secondary-button-padding"> <p>Devices currently managed</p> <p class="md-secondary">{{deviceCount}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>Fleets currently managed</p> <p class="md-secondary">{{fleetsCount}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>Files uploaded</p> <p class="md-secondary">{{filesCount}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>Applications uploaded</p> <p class="md-secondary">{{applicationsCount}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>Number of users</p> <p class="md-secondary">{{usersCount}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>Invitations sent</p> <p class="md-secondary">{{invitationsCount}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>Types of policies</p> <p class="md-secondary">{{policiesCount}}</p> </md-list-item> <md-list-item class="secondary-button-padding"> <p>Number of categories for policies</p> <p class="md-secondary">{{categoriesCount}}</p> </md-list-item> <!--\r\n              <md-list-item class="secondary-button-padding">\r\n                <p>Upload max file size</p>\r\n                <p class="md-secondary"></p>\r\n              </md-list-item>\r\n              --> <md-divider></md-divider> </md-list> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Profile</md-tab-label> <md-tab-body> <md-content layout-padding="true"> <form name="userForm" ng-submit="saveUser()"> <div layout-gt-xs="row"> <md-input-container class="md-block" flex-gt-xs="true"> <label>Login</label> <input ng-model="user.username" disabled> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-icon-float md-block" flex-gt-sm="true"> <label>First name</label> <md-icon class="fa fa-user fa-lg md-primary" aria-hidden="true"></md-icon> <input ng-model="user.firstname" type="text"> </md-input-container> <md-input-container class="md-block" flex-gt-sm="true"> <label>Last Name</label> <input ng-model="user.realname"> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-icon-float md-block" flex-gt-sm="true"> <label>Phone</label> <md-icon class="fa fa-phone fa-lg md-primary" aria-hidden="true"></md-icon> <input ng-model="user.phone" type="tel"> </md-input-container> <md-input-container class="md-block" flex-gt-sm="true"> <label>Mobile phone</label> <input ng-model="user.mobile" type="tel"> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-icon-float md-block" flex-gt-sm="true"> <label>Phone 2</label> <md-icon class="fa fa-phone fa-lg md-primary" aria-hidden="true"></md-icon> <input ng-model="user.phone2" type="tel"> </md-input-container> <md-input-container class="md-block" flex-gt-sm="true"> <label>Administrative number</label> <input ng-model="user.registration_number" type="number"> </md-input-container> </div> <div layout-gt-xs="row"> <md-input-container class="md-icon-float md-block" flex-gt-sm="true"> <label>Last login</label> <md-icon class="fa fa-calendar-o fa-lg md-primary" aria-hidden="true"></md-icon> <input ng-model="user.last_login" disabled> </md-input-container> <md-input-container> <label>Created</label> <input ng-model="user.date_creation" disabled> </md-input-container> <md-input-container> <label>Modified</label> <input ng-model="user.date_mod" disabled> </md-input-container> </div> </form> </md-content> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Security</md-tab-label> <md-tab-body> <md-list flex="true"> <md-list-item class="md-2-line secondary-button-padding"> <div class="md-list-item-text"> <h3>Password</h3> <p>Change your FlyveMDM Account password.</p> </div> <md-button class="md-warn" ng-click="changePassword($event)">Edit</md-button> </md-list-item> <md-divider></md-divider> <md-list-item class="md-2-line secondary-button-padding"> <div class="md-list-item-text"> <h3>Kill session</h3> <p>Destroy the session identified by your session token.</p> </div> <md-button class="md-warn" ng-click="disconnect($event)">logout</md-button> </md-list-item> <md-divider></md-divider> <md-list-item class="md-2-line secondary-button-padding"> <div class="md-list-item-text"> <h3>Delete browser data</h3> <p>Delete Web Storage and Indexed Database</p> </div> <md-button class="md-warn" ng-click="deleteBrowserData($event)">Delete</md-button> </md-list-item> <md-divider></md-divider> <md-list-item class="md-2-line secondary-button-padding"> <div class="md-list-item-text"> <h3>Delete account</h3> <p>This action remove all information related to the user and the entity</p> </div> <md-button class="md-warn" ng-click="deleteAccount($event)">Delete</md-button> </md-list-item> </md-list> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Notifications</md-tab-label> <md-tab-body> <md-list> <md-subheader class="md-no-sticky">End-user notifications (saved only in this browser)</md-subheader> <md-list-item class="md-2-line"> <div class="md-list-item-text"> <h3>Show notifications</h3> <p>For error messages is always enabled</p> </div> <md-switch class="md-primary" ng-model="notification.enable" ng-change="enableNotification(notification.enable)"></md-switch> </md-list-item> <md-list-item class="md-2-line"> <div class="md-list-item-text"> <h3>Notification type</h3> <p>{{notificationMsg}}</p> </div> <md-menu class="md-secondary"> <md-button class="md-primary">{{notification.type}}</md-button> <md-menu-content> <md-menu-item ng-repeat="notificationType in notifications"> <md-button ng-click="changeNotificatioType(notificationType)"> {{notificationType}} </md-button> </md-menu-item> </md-menu-content> </md-menu> </md-list-item> <md-divider></md-divider> </md-list> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Display</md-tab-label> <md-tab-body> <md-list> <md-subheader class="md-no-sticky">Language</md-subheader> <md-list-item> <p>Change interface language</p> <md-menu class="md-secondary"> <md-button class="md-primary">{{language.name}}</md-button> <md-menu-content> <md-menu-item ng-repeat="lang in languages"> <md-button ng-click="changeLanguage(lang)" ng-disabled="lock_language"> {{lang.name}} </md-button> </md-menu-item> </md-menu-content> </md-menu> </md-list-item> <md-subheader class="md-no-sticky">Show in dashboard</md-subheader> <md-list-item> <p>Maximum managed devices</p> <md-checkbox class="md-secondary" ng-model="dashboard.max_devices" ng-change="dashboardView()"></md-checkbox> </md-list-item> <md-list-item> <p>Devices currently managed</p> <md-checkbox class="md-secondary" ng-model="dashboard.devices" ng-change="dashboardView()"></md-checkbox> </md-list-item> <md-list-item> <p>Fleets currently managed</p> <md-checkbox class="md-secondary" ng-model="dashboard.fleets" ng-change="dashboardView()"></md-checkbox> </md-list-item> <md-list-item> <p>Files uploaded</p> <md-checkbox class="md-secondary" ng-model="dashboard.files" ng-change="dashboardView()"></md-checkbox> </md-list-item> <md-list-item> <p>Applications uploaded</p> <md-checkbox class="md-secondary" ng-model="dashboard.applications" ng-change="dashboardView()"></md-checkbox> </md-list-item> <md-list-item> <p>Number of users</p> <md-checkbox class="md-secondary" ng-model="dashboard.users" ng-change="dashboardView()"></md-checkbox> </md-list-item> <md-list-item> <p>Invitations sent</p> <md-checkbox class="md-secondary" ng-model="dashboard.invitations" ng-change="dashboardView()"></md-checkbox> </md-list-item> <md-list-item> <p>Devices by users</p> <md-checkbox class="md-secondary" ng-model="dashboard.devices_users" ng-change="dashboardView()"></md-checkbox> </md-list-item> <md-list-item> <p>Devices by Operating System version</p> <md-checkbox class="md-secondary" ng-model="dashboard.devices_os" ng-change="dashboardView()"></md-checkbox> </md-list-item> <md-divider></md-divider> </md-list> </md-tab-body> </md-tab> </md-tabs> </div> <div ng-show="selectedTab === 1" class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-primary" ng-disabled="lock_save_user" ng-click="saveUser()"> <i class="fa fa-floppy-o" aria-hidden="true"></i> </md-button> </div> </div> </div>'),a.put("views/accountvalidation.html",'<section class="login-page"> <div class="container" layout="column" layout-padding="" layout-wrap="" layout-fill="" ng-cloak=""> <md-card class="login-card"> <img ng-src="images/logo-flyve-login.png" class="md-card-image" alt="Flyve MDM Logo"> <md-card-actions layout="row" layout-align="center center"> <md-button ng-click="goToLogin($event)" ng-if="show_login">Login page</md-button> <md-button class="md-raised md-primary" ng-click="validateAccount($event)" ng-disabled="lock_submit" ng-if="!show_login">Validate account</md-button> </md-card-actions> </md-card> </div> <div class="md-body-1 layout-margin foo" layout="row" layout-align="end center"> <p>A solution powered by</p> <a href="http://teclib-edition.com/en/" target="_blank" title="Teclib\'\' Web Site"><img src="images/logo-teclib-blanc-1-2.png" alt="Flyve Logo" height="24"></a> </div> </section>'),a.put("views/admin_applications.html",'<div class="view"> <h2 class="collection-infos"><span>{{collectionLength}}</span> Applications</h2> <div class="table-container"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span>{{collectionLength}}</span> Applications</p> </div> <table st-table="displayedCollection" flyve-table="true" st-pipe="fillTable"> <thead> <tr> <th class="id-column"># <span>#</span></th> <th></th> <th>Alias <span>Alias</span></th> <th></th> <th>Application Name <span>Application Name</span></th> <th>Version</th> <th>Size</th> <th class="action-column"></th> <th class="action-column"></th> </tr> </thead> <tbody> <tr ng-repeat="application in displayedCollection"> <td class="id-column">{{application.id}}</td> <td class="icon-column"><img ng-show="application.icon != \'\'" ng-src="data:image/png;base64,{{application.icon}}" alt="{{application.name}}\'s icon"></td> <td>{{application.alias}}</td> <td class="os-column"><img ng-src="images/{{application.type}}.png" alt="{{application.type}} icon"></td> <td>{{application.name}}</td> <td>{{application.version}}</td> <td>{{application.filesize}}</td> <td class="action-column"> <md-button aria-label="edit this application" ng-click="editApplication($event, application)" class="md-icon-button edit-action"> <i class="fa fa-pencil"></i> </md-button> </td> <td class="action-column"> <md-button aria-label="delete this application" ng-click="deleteApplication($event, application)" class="md-icon-button delete-action"> <i class="fa fa-trash-o"></i> </md-button> </td> </tr> </tbody> </table> <p class="table-loading" ng-show="loading"> <i class="fa fa-spinner"></i>Loading items... </p> </div> </div> <div class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-accent" ng-disabled="lock_insert" ng-click="insertIntoTable()"> <i class="fa fa-plus" aria-hidden="true"></i> </md-button> </div> </div>'),a.put("views/admin_files.html",'<div class="view"> <h2 class="collection-infos"><span>{{collectionLength}}</span> Files</h2> <div class="table-container"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span>{{collectionLength}}</span> Files</p> </div> <table st-table="displayedCollection" flyve-table="true" st-pipe="fillTable"> <thead> <tr> <th class="id-column"># <span>#</span></th> <th>Name <span>Name</span></th> <th>Source <span>Source</span></th> <th class="action-column"></th> <th class="action-column"></th> </tr> </thead> <tbody> <tr ng-repeat="file in displayedCollection"> <td class="id-column">{{file.id}}</td> <td>{{file.name}}</td> <td> {{file.source}} </td> <td class="action-column"> <md-button aria-label="Edit" ng-click="editFile($event, file)" class="md-icon-button edit-action"> <i class="fa fa-pencil"></i> </md-button> </td> <td class="action-column"> <md-button aria-label="Delete" ng-click="deleteFile($event, file)" class="md-icon-button delete-action"> <i class="fa fa-trash-o"></i> </md-button> </td> </tr> </tbody> </table> <p class="table-loading" ng-show="loading"> <i class="fa fa-spinner"></i>Loading items... </p> </div> </div> <div class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-accent" ng-disabled="lock_insert" ng-click="insertIntoTable()"> <i class="fa fa-plus" aria-hidden="true"></i> </md-button> </div> </div>'),a.put("views/admin_fleets.html",'<div class="view"> <h2 class="collection-infos"><span>{{collectionLength}}</span> Fleets</h2> <div class="table-container"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span>{{collectionLength}}</span> Fleets</p> </div> <table st-table="displayedCollection" flyve-table="true" st-pipe="fillTable"> <thead> <tr> <th class="id-column"># <span>#</span></th> <th>Name <span>Name</span></th> <th class="action-column"></th> <th class="action-column"></th> </tr> </thead> <tbody> <tr ng-repeat="fleet in displayedCollection"> <td class="id-column">{{fleet.id}}</td> <td>{{fleet.name}}</td> <td class="action-column"> <md-button aria-label="edit FLeet" ng-click="editFleet(fleet, 0)" class="md-icon-button edit-action"> <i class="fa fa-pencil"></i> </md-button> </td> <td class="action-column"> <md-button aria-label="delete Fleet" ng-click="deleteFleet(fleet)" class="md-icon-button delete-action"> <i class="fa fa-trash-o"></i> </md-button> </td> </tr> </tbody> </table> <p class="table-loading" ng-show="loading"> <i class="fa fa-spinner"></i>Loading items... </p> </div> </div> <div class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-accent" ng-disabled="lock_insert" ng-click="insertIntoTable()"> <i class="fa fa-plus" aria-hidden="true"></i> </md-button> </div> </div>'),a.put("views/admin_users.html",'<div class="view"> <h2 class="collection-infos"><span>{{collectionLength}}</span> Users</h2> <div class="table-container"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span>{{collectionLength}}</span> Users</p> </div> <table st-table="displayedCollection" flyve-table="true" st-pipe="fillTable"> <thead> <tr> <th class="id-column"># <span>#</span></th> <th>Name <span>Name</span></th> <th>Username <span>Username</span></th> <th>Device <span>Device</span></th> <th class="action-column"></th> <th class="action-column"></th> </tr> </thead> <tbody> <tr ng-repeat="user in displayedCollection"> <td class="id-column">{{user.id}}</td> <td>{{user.fullname}}</td> <td>{{user.username}}</td> <td>{{user.device_name}}</td> <td class="action-column"> <md-button aria-label="Edit" ng-click="editUser($event, user)" class="md-icon-button edit-action"> <i class="fa fa-pencil"></i> </md-button> </td> <td class="action-column"> <md-button aria-label="Delete" ng-click="deleteUser($event, user)" class="md-icon-button delete-action"> <i class="fa fa-trash-o"></i> </md-button> </td> </tr> </tbody> </table> <p class="table-loading" ng-show="loading"> <i class="fa fa-spinner"></i>Loading items... </p> </div> </div> <div class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-accent" ng-disabled="lock_insert" ng-click="insertIntoTable($event)"> <i class="fa fa-plus" aria-hidden="true"></i> </md-button> </div> </div>'),a.put("views/contact.html",'<div class="view contact-panel" ng-cloak="true"> <h2 class="collection-infos"> Contact us </h2> <div class="table-container about-page"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span class="about-title">About</span></p> </div> <md-content flex="true" layout-padding="true" class="contact-info"> <h3>Feel free to contact us at any time, selecting your preferred channel. A Teclib\' expert will answer your request and provide you with all the information and advice you need about: our Products, Partnership Programs, Training Courses and Support solutions.</h3> <h2>"The connexion between open source Communities, Partners, Customers, and R&D Organizations, is made simple and streamlined with Teclib\'"</h2> </md-content> </div> </div> <md-grid-list md-cols-xs="1" md-cols-sm="2" md-cols-md="4" md-cols-gt-md="4" md-row-height-gt-md="1:1" md-row-height="2:2" md-gutter="12px" md-gutter-gt-sm="8px"> <md-grid-tile class="white link" ng-click="links(\'map\')"> <div layout="column"> <i class="fa fa-map-marker fa-4x"></i> <h2 class="contact-infos">Barcelona, Spain</h2> </div> <md-grid-tile-footer> <h3>Teclib\' Address</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white link" ng-click="links(\'tel\')"> <div layout="column"> <i class="fa fa-phone fa-4x"></i> <h2 class="contact-infos">+34 512 702 140</h2> </div> <md-grid-tile-footer> <h3>Phone</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white link" ng-click="links(\'email\')"> <div layout="column"> <i class="fa fa-envelope fa-4x"></i> <h2 class="contact-infos">contact@teclib.com</h2> </div> <md-grid-tile-footer> <h3>Email</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white link" ng-click="links(\'ticket\')"> <div layout="column"> <i class="fa fa-ticket fa-4x"></i> <h2 class="contact-infos">Send a ticket</h2> </div> <md-grid-tile-footer> <h3>Support Ticket</h3> </md-grid-tile-footer> </md-grid-tile> </md-grid-list> </div>'),a.put("views/dashboard.html",'<div class="view dashboard"> <h2 class="collection-infos">Dashboard</h2> <md-grid-list md-cols-xs="1" md-cols-sm="2" md-cols-md="4" md-cols-gt-md="6" md-row-height-gt-md="1:1" md-row-height="2:2" md-gutter="12px" md-gutter-gt-sm="8px"> <md-grid-tile class="white" md-rowspan="3" md-colspan="1" md-colspan-sm="1" md-colspan-xs="1"> <md-list> <md-list-item ng-repeat="device in devicesByRealName" ng-click="editDevice(device.id)"> <p> {{ device.realname }} </p> </md-list-item> </md-list> <md-grid-tile-footer> <h3>Devices by Users</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white link" ng-click="links(\'devices\')"> <h2 class="collection-infos">{{devices}}</h2> <md-grid-tile-footer> <h3>Devices</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white link" ng-click="links(\'admin_fleets\')"> <h2 class="collection-infos">{{fleets}}</h2> <md-grid-tile-footer> <h3>Fleets</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white link" ng-click="links(\'admin_applications\')"> <h2 class="collection-infos">{{applications}}</h2> <md-grid-tile-footer> <h3>Applications</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white link" ng-click="links(\'admin_files\')"> <h2 class="collection-infos">{{files}}</h2> <md-grid-tile-footer> <h3>Files</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white link" ng-click="links(\'admin_users\')"> <h2 class="collection-infos">{{users}}</h2> <md-grid-tile-footer> <h3>Users</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white" md-rowspan="2" md-colspan="2" md-colspan-sm="1" md-colspan-xs="1"> <canvas id="invitations" class="chart chart-doughnut" chart-data="invitations.data" chart-labels="invitations.labels" chart-dataset-override="invitations.dataset"></canvas> <md-grid-tile-footer> <h3>Invitations</h3> </md-grid-tile-footer> </md-grid-tile> <md-grid-tile class="white" md-colspan="3" md-rowspan="2"> <canvas class="chart chart-bar" chart-data="devices_os.data" chart-labels="devices_os.labels" chart-series="devices_os.series" chart-colors="devices_os.colors" chart-dataset-override="devices_os.dataset"></canvas> <md-grid-tile-footer> <h3>Devices by Operating System version</h3> </md-grid-tile-footer> </md-grid-tile> </md-grid-list> <div class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-accent" ng-disabled="lock_refresh" ng-click="refreshDashboard(true)"> <i class="fa fa-refresh" aria-hidden="true"></i> </md-button> </div> </div>'),
a.put("views/device.html",'<div class="view device-panel" ng-cloak="true"> <h2 class="collection-infos"> <span class="device-title">Device</span> <span class="device-name">{{title}}</span> </h2> <div class="table-container device-page"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span class="device-title">Device</span> <span class="device-name">{{title}}</span></p> </div> <md-tabs md-dynamic-height="true" md-selected="selectedTab"> <md-tab> <md-tab-label>Main</md-tab-label> <md-tab-body> <md-input-container> <label>Device Name</label> <input type="text" ng-model="agent.name"> </md-input-container> <br> <md-input-container> <label>Fleet</label> <md-select ng-model="agent.fleet_id" aria-label="Select a fleet"> <md-option ng-value="fleet.id" ng-repeat="fleet in fleets">{{fleet.name}}</md-option> </md-select> </md-input-container> <p>Changing the Fleet of the device has the immediate consequence of applying the Fleet\'s Configuration to the specific Device </p> <br> <br> <p class="last-contact">Last contact: {{agent._contacted}}</p> <br> <p class="ping-description">This button sends a Ping to the device</p> <br> <md-button class="md-raised md-primary" ng-disabled="lock_send_ping" ng-click="sendPing()" aria-label="PING">PING</md-button> <br> <br> <p>{{pingSendingStatus}}</p> <br> <p>{{pingSendingStatus !== \'\' ? pingReplyStatus : \'\'}}</p> </md-tab-body> </md-tab> <md-tab> <md-tab-label>System Report</md-tab-label> <md-tab-body> <div id="specs-list" class="system-report"> <table cellspacing="0"> <tbody> <tr> <th rowspan="3" scope="row">Agent</th> <td class="ttl"> <a href="" ng-click="glosary($event, \'agent.id\')">ID</a> </td> <td class="nfo">{{agent.id}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'agent.name\')">Name</a></td> <td class="nfo">{{agent.name}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'agent.version\')">Version</a></td> <td class="nfo">{{agent.version}}</td> </tr> <tr> <th rowspan="2" scope="row">Fleet</th> <td class="ttl"> <a href="" ng-click="glosary($event, \'fleet.id\')">ID</a> </td> <td class="nfo">{{agent.fleet_id}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'fleet.name\')">Name</a></td> <td class="nfo">{{agent.fleet_name}}</td> </tr> <tr> <th rowspan="5" scope="row">Device</th> <td class="ttl"> <a href="" ng-click="glosary($event, \'device.id\')">ID</a> </td> <td class="nfo">{{computer.device.id}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'device.type\')">Type</a></td> <td class="nfo">{{computer.device.type}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'device.model\')">Model</a></td> <td class="nfo">{{computer.device.model}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'device.manufacturer\')">Manufacturer</a></td> <td class="nfo">{{computer.device.manufacturer}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'device.serial\')">Serial</a></td> <td class="nfo">{{computer.device.serial}}</td> </tr> <tr> <th rowspan="4" scope="row">Dates</th> <td class="ttl"><a href="" ng-click="glosary($event, \'date.creation\')">Creation</a></td> <td class="nfo">{{computer.date.creation}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'date.modification\')">Modification</a></td> <td class="nfo">{{computer.date.modification}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'date.last_report\')">Last report</a></td> <td class="nfo">{{computer.date.last_report}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'date.last_contact\')">Last contact</a></td> <td class="nfo">{{computer.date.last_contact}}</td> </tr> <tr> <th rowspan="2" scope="row">Launch</th> <td class="ttl"><a href="" ng-click="glosary($event, \'launch.announced\')">Announced</a></td> <td class="nfo">{{computer.launch.announced}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'launch.status\')">Status</a></td> <td class="nfo">{{computer.launch.status}}</td> </tr> <tr> <th rowspan="4" scope="row">Body</th> <td class="ttl"><a href="" ng-click="glosary($event, \'body.dimensions\')">Dimensions</a></td> <td class="nfo">{{computer.body.dimensions}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'body.weight\')">Weight</a></td> <td class="nfo">{{computer.body.weight}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'body.sim\')">SIM</a></td> <td class="nfo">{{computer.body.sim}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'body.protection\')">Protection</a></td> <td class="nfo">{{computer.body.protection}}</td> </tr> <tr> <th rowspan="6" scope="row">Display</th> <td class="ttl"><a href="" ng-click="glosary($event, \'display.type\')">type</a></td> <td class="nfo">{{computer.display.type}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'display.size\')">Size</a></td> <td class="nfo">{{computer.display.size}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'display.resolution\')">Resolution</a></td> <td class="nfo">{{computer.display.resolution}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'display.multitouch\')">Multitouch</a></td> <td class="nfo">{{computer.display.multitouch}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'display.protection\')">Protection</a></td> <td class="nfo">{{computer.display.protection}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'display.others\')">Others</a></td> <td class="nfo">{{computer.display.others}}</td> </tr> <tr> <th rowspan="4" scope="row">Platform</th> <td class="ttl"><a href="" ng-click="glosary($event, \'platform.os\')">OS</a></td> <td class="nfo">{{computer.platform.os}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'platform.chipset\')">Chipset</a></td> <td class="nfo">{{computer.platform.chipset}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'platform.cpu\')">CPU</a></td> <td class="nfo">{{computer.platform.cpu}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'platform.gpu\')">GPU</a></td> <td class="nfo">{{computer.platform.gpu}}</td> </tr> <tr> <th rowspan="{{computer.memory.partitioning.length + 4}}" scope="row">Memory</th> <td class="ttl"><a href="" ng-click="glosary($event, \'memory.card_slot\')">Card slot</a></td> <td class="nfo">{{computer.memory.card_slot}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'memory.non_volatile\')">Non-volatile</a></td> <td class="nfo">{{computer.memory.non_volatile}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'memory.volatile\')">Volatile</a></td> <td class="nfo">{{computer.memory.volatile}}</td> </tr> <tr> <td rowspan="{{computer.memory.partitioning.length + 1}}" class="ttl"> <a href="" ng-click="glosary($event, \'memory.partitioning\')">Partitioning</a> </td> <td class="nfo">{{computer.memory.partitioning2.description}}</td> </tr> <tr ng-repeat="partition in computer.memory.partitioning"> <td class="nfo">{{partition.description}}</td> </tr> <tr> <th rowspan="4" scope="row">Camera</th> <td class="ttl"><a href="" ng-click="glosary($event, \'camera.primary\')">Primary</a></td> <td class="nfo">{{computer.camera.primary}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'camera.features\')">Features</a></td> <td class="nfo">{{computer.camera.features}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'camera.video\')">Video</a></td> <td class="nfo">{{computer.camera.video}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'camera.secondary\')">Secondary</a></td> <td class="nfo">{{computer.camera.secondary}}</td> </tr> <tr> <th rowspan="3" scope="row">Sound</th> <td class="ttl"><a href="" ng-click="glosary($event, \'sound.alert_types\')">Alert types</a></td> <td class="nfo">{{computer.sound.alert_types}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'sound.loudspeaker\')">Loudspeaker</a></td> <td class="nfo">{{computer.sound.loudspeaker}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'sound.connections\')">Connections</a></td> <td class="nfo">{{computer.sound.connections}}</td> </tr> <tr> <th rowspan="5" scope="row">Network</th> <td class="ttl"><a href="" ng-click="glosary($event, \'network.technology\')">Technology</a></td> <td class="nfo">{{computer.network.technology}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'network[\\\'2g_bands\\\']\')">2G Bands</a></td> <td class="nfo">{{computer.network[\'2g_bands\']}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'network[\\\'3g_bands\\\']\')">3G Bands</a></td> <td class="nfo">{{computer.network[\'3g_bands\']}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'network[\\\'4g_bands\\\']\')">4G Bands</a></td> <td class="nfo">{{computer.network[\'4g_bands\']}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'network.speed\')">Speed</a></td> <td class="nfo">{{computer.network.speed}}</td> </tr> <tr ng-if="false"> <td class="ttl"><a href="" ng-click="glosary($event, \'network.gprs\')">GPRS</a></td> <td class="nfo">{{computer.network.gprs}}</td> </tr> <tr ng-if="false"> <td class="ttl"><a href="" ng-click="glosary($event, \'network.edge\')">EDGE</a></td> <td class="nfo">{{computer.network.edge}}</td> </tr> <tr> <th rowspan="6" scope="row">Comms</th> <td class="ttl"><a href="" ng-click="glosary($event, \'comms.wlan\')">WLAN</a></td> <td class="nfo">{{computer.comms.wlan.description}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'comms.bluetooth\')">Bluetooth</a></td> <td class="nfo">{{computer.comms.bluetooth}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'comms.gps\')">GPS</a></td> <td class="nfo">{{computer.comms.gps}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'comms.nfc\')">NFC</a></td> <td class="nfo">{{computer.comms.nfc}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'comms.radio\')">Radio</a></td> <td class="nfo">{{computer.comms.radio}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'comms.usb\')">USB</a></td> <td class="nfo">{{computer.comms.usb}}</td> </tr> <tr> <th rowspan="2" scope="row">Sensors</th> <td class="ttl"><a href="" ng-click="glosary($event, \'sensors.type\')">Type</a></td> <td class="nfo">{{computer.comms.sensors[0].type}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'sensors.manufacturer\')">Manufacturer</a></td> <td class="nfo">{{computer.sensors[0].manufacturer}}</td> </tr> <tr> <th rowspan="4" scope="row">Features</th> <td class="ttl"><a href="" ng-click="glosary($event, \'features.messaging\')">Messaging</a></td> <td class="nfo">{{computer.features.messaging}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'features.browser\')">Browser</a></td> <td class="nfo">{{computer.features.browser}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'features.java\')">Java</a></td> <td class="nfo">{{computer.features.java}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'features.others\')">Others</a></td> <td class="nfo">{{computer.features.others}}</td> </tr> <tr> <th rowspan="4" scope="row">Battery</th> <td class="ttl"><a href="" ng-click="glosary($event, \'battery.details\')">Details</a></td> <td class="nfo">{{computer.battery.details}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'battery.[\\\'stand-by\\\']\')">Stand-by</a></td> <td class="nfo">{{computer.battery[\'stand-by\']}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'battery.talk_time\')">Talk time</a></td> <td class="nfo">{{computer.battery.talk_time}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'battery.music_play\')">Music play</a></td> <td class="nfo">{{computer.battery.music_play}}</td> </tr> <tr> <th rowspan="4" scope="row">Misc</th> <td class="ttl"><a href="" ng-click="glosary($event, \'misc.colors\')">Colors</a></td> <td class="nfo">{{computer.misc.colors}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'misc.sar_us\')">SAR US</a></td> <td class="nfo">{{computer.misc.sar_us}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'misc.sar_eu\')">SAR EU</a></td> <td class="nfo">{{computer.misc.sar_eu}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'misc.price_group\')">Price group</a></td> <td class="nfo">{{computer.misc.price_group}}</td> </tr> <tr> <th rowspan="6" scope="row">Tests</th> <td class="ttl"><a href="" ng-click="glosary($event, \'tests.performance\')">Performance</a></td> <td class="nfo">{{computer.tests.performance}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'tests.display\')">Display</a></td> <td class="nfo">{{computer.tests.display}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'tests.camera\')">Camera</a></td> <td class="nfo">{{computer.tests.camera}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'tests.loudspeaker\')">Loudspeaker</a></td> <td class="nfo">{{computer.tests.loudspeaker}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'tests.audio_quality\')">Audio quality</a></td> <td class="nfo">{{computer.tests.audio_quality}}</td> </tr> <tr> <td class="ttl"><a href="" ng-click="glosary($event, \'tests.battery_life\')">Battery life</a></td> <td class="nfo">{{computer.tests.battery_life}}</td> </tr> </tbody> </table> </div> </md-tab-body> </md-tab> <md-tab md-on-select="refreshTable()" ng-disabled="no_inventory"> <md-tab-label>Applications</md-tab-label> <md-tab-body> <table id="apps" st-table="displayedApplications" flyve-table="true" st-pipe="fillTable" refresh-table="true"> <thead> <tr> <th class="id-column"># <span>#</span></th> <th>Application ID <span>Application ID</span></th> <th>Version Name <span>Version Name</span></th> <th>Category <span>Category</span></th> </tr> </thead> <tbody> <tr ng-repeat="application in displayedApplications"> <td class="id-column">{{application.id}}</td> <td>{{application.application_id}}</td> <td>{{application.version_name}}</td> <td>{{application.category}}</td> </tr> </tbody> </table> <p class="table-loading" ng-show="loading"> <i class="fa fa-spinner"></i>Loading items... </p> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Geolocation</md-tab-label> <md-tab-body> <md-content layout="row" class="device-position"> <div flex="70"> <!-- Map --> <div id="mapid"></div> </div> <div flex="30"> <!-- Recent locations list --> <ul class="device-geolocations"> <li class="loading" ng-show="geolocationsLoading"> <i class="fa fa-spinner" aria-hidden="true"></i> </li> <li class="geolocation" ng-repeat="geolocation in latestGeolocations"> <md-checkbox ng-if="!isNaNGeolocation(geolocation)" aria-label="Geolocation" ng-checked="isSelectedGeolocation(geolocation) !== false" ng-click="toggleSelectGeolocation(geolocation)"> </md-checkbox> <md-checkbox ng-disabled="true" ng-if="isNaNGeolocation(geolocation)" aria-label="Geolocation"> <i class="fa fa-exclamation-circle" aria-hidden="true"> <md-tooltip>Invalid geolocation</md-tooltip> </i> </md-checkbox> <span class="date" ng-show="geolocationInfoDisplayed == \'date\'">{{geolocation.date}}</span> <span class="time-ago" ng-show="geolocationInfoDisplayed == \'timeAgo\'">{{geolocation.timeAgo}}</span> <span class="lat-lng" ng-show="geolocationInfoDisplayed == \'lat-lng\'">{{geolocation.displayable.lat}} , {{geolocation.displayable.lng}}</span> </li> </ul> <div class="geolocations-pagination"> <ul ng-show="currentNGeolocationPages > 1"> <li ng-repeat="page_n in currentGeolocationPages" ng-click="displayGeolocationPage(page_n)" ng-class="currentOpenedPage == page_n ? \'active\' : \'\'"> {{page_n}} </li> </ul> </div> </div> </md-content> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Danger Zone</md-tab-label> <md-tab-body> <md-list> <md-list-item class="md-2-line secondary-button-padding"> <div class="md-list-item-text"> <h3>Wipe Device</h3> <p>Wipe will delete all data on the device.</p> </div> <md-button class="md-warn" ng-click="wipeDevice($event)">Wipe</md-button> </md-list-item> <md-divider></md-divider> <md-list-item class="md-2-line secondary-button-padding"> <div class="md-list-item-text"> <h3>Unenrollment Device</h3> <p>Unenrollment will change the state of the device (policies are unapplied, deployed files and app will be removed).</p> </div> <md-button class="md-warn" ng-click="unenrollDevice($event)">Unenroll</md-button> </md-list-item> <md-divider></md-divider> <md-list-item class="md-2-line secondary-button-padding"> <div class="md-list-item-text"> <h3>Delete Device</h3> <p>Once you delete a device, there is no going back. Please be certain.</p> </div> <md-button class="md-warn" ng-click="deleteDevice($event)">Delete</md-button> </md-list-item> </md-list> </md-tab-body> </md-tab> </md-tabs> </div> <div ng-show="selectedTab === 0" class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-primary" ng-disabled="lock_save_device" ng-click="saveDevice()"> <i class="fa fa-floppy-o" aria-hidden="true"></i> </md-button> </div> <div ng-show="selectedTab === 1 || selectedTab === 2" class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-accent" ng-disabled="lock_inventory" ng-click="getInventoryFromDevice()"> <i class="fa fa-refresh" aria-hidden="true"></i> </md-button> </div> <div ng-show="selectedTab === 3" class="fab-action-box" ng-init="geolocationInfoDisplayed = \'timeAgo\'"> <md-fab-speed-dial md-direction="down" ng-click="$event.stopPropagation()" class="md-scale"> <md-fab-trigger> <md-button type="button" aria-label="actions for position" class="md-fab md-accent"> <i class="fa fa-bars"></i> </md-button> </md-fab-trigger> <md-fab-actions> <md-button type="button" aria-label="Request current geolocation" class="md-fab" ng-disabled="lock_geolocation" ng-click="requestCurrentGeolocation()"> <i class="fa fa-map-marker"></i> <md-tooltip>Request Current Geolocation</md-tooltip> </md-button> <md-button type="button" aria-label="show latitude/longitude" class="md-fab" ng-click="geolocationInfoDisplayed = \'lat-lng\'" ng-hide="geolocationInfoDisplayed == \'lat-lng\'"> <i class="fa fa-location-arrow"></i> <md-tooltip>Show (Lat,Lng) of positions</md-tooltip> </md-button> <md-button type="button" aria-label="show latitude/longitude" class="md-fab" ng-click="geolocationInfoDisplayed = \'date\'" ng-hide="geolocationInfoDisplayed == \'date\'"> <i class="fa fa-clock-o"></i> <md-tooltip>Show exact Date/Time of positions</md-tooltip> </md-button> <md-button type="button" aria-label="show time elapsed since" class="md-fab" ng-click="geolocationInfoDisplayed = \'timeAgo\'" ng-hide="geolocationInfoDisplayed == \'timeAgo\'"> <i class="fa fa-clock-o"></i> <md-tooltip>Show time elapsed since</md-tooltip> </md-button> </md-fab-actions> </md-fab-speed-dial> </div> </div> </div>'),a.put("views/devices.html",'<div class="view"> <h2 class="collection-infos"><span>{{collectionLength}}</span> Devices</h2> <div layout="row"> <div layout="column"> <div class="current-filters"> <div ng-show="selectedFleets.length > 0" class="filter-fleet"> <p>In Fleets :</p> <ul> <li ng-repeat="fleet in selectedFleets"> {{fleet.name}} <i class="fa fa-times" ng-click="selectedFleets.splice(selectedFleets.indexOf(fleet), 1) && refreshTable()"></i> </li> </ul> </div> </div> <div class="filters-controls" layout="row"> <md-input-container flex="true"> <label>Filter by Fleet</label> <md-select ng-model="selectedFleetToFilterWith"> <md-option ng-repeat="fleet in fleets" ng-show="selectedFleets.indexOf(fleet) == -1" ng-value="fleet"> {{fleet.name}} </md-option> </md-select> </md-input-container> </div> </div> <button type="button" ui-sref="invitations" has-ripple="true" class="size-1">Pending Invitations</button> </div> <div class="table-container"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span>{{collectionLength}}</span> Devices</p> </div> <table st-table="displayedDevices" flyve-table="true" st-pipe="fillTable"> <thead> <tr> <th class="id-column"># <span>#</span></th> <th>Name <span>Name</span></th> <th>Device <span>Device</span></th> <th>Serial <span>Serial</span></th> <th>Fleet <span>Fleet</span></th> <th>Last contact <span>Last contact</span></th> <th class="action-column"></th> <th class="action-column"></th> </tr> </thead> <tbody> <tr ng-repeat="device in displayedDevices"> <td class="id-column">{{device.id}}</td> <td>{{device.realname}}</td> <td>{{device.manufacturer_model}}</td> <td>{{device.serial}}</td> <td>{{device.fleet.name}}</td> <td>{{device._contacted || \'Never contacted\'}}</td> <td class="action-column"> <md-button ng-click="editDevice(device.id)" aria-label="Edit device" class="md-icon-button edit-action"> <md-tooltip> Open device panel </md-tooltip> <i class="fa fa-pencil"></i> </md-button> </td> <td class="action-column"> <md-button ng-click="deleteDevice(device.id)" aria-label="Delete device" class="md-icon-button delete-action"> <md-tooltip> Delete device </md-tooltip> <i class="fa fa-trash-o"></i> </md-button> </td> </tr> </tbody> </table> <p class="table-loading" ng-show="loading"> <i class="fa fa-spinner"></i>Loading items... </p> </div> </div> <div class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-accent" ng-disabled="lock_insert" ng-click="insertIntoTable()"> <i class="fa fa-plus" aria-hidden="true"></i> </md-button> </div> </div>'),a.put("views/dialog_changepassword.html",'<md-dialog class="flyve-dialog" flex="66"> <div class="dialog-header"> <h2>Change Password</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="Closes window which helps changing the password"> <i class="fa fa-times"></i> </md-button> </div> <div class="dialog-content"> <form ng-submit="changePassword()"> <md-content layout="column"> <md-input-container> <label>New password</label> <input type="password" ng-model="user.newPassword"> </md-input-container> <md-input-container> <label>Retype password</label> <input type="password" ng-model="user.newPassword2"> </md-input-container> </md-content> <md-dialog-actions layout="row"> <md-button class="md-raised md-warn" ng-click="cancel()" aria-label="Cancel">Cancel</md-button> <md-button class="md-raised md-primary" ng-disabled="lock_submit" type="submit" aria-label="Save">Save</md-button> </md-dialog-actions> </form> </div> </md-dialog>'),a.put("views/dialog_editapplication.html",'<md-dialog class="flyve-dialog" flex="66"> <div class="dialog-header"> <h2>Edit Application</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="Closes window which helps edit an application"> <i class="fa fa-times"></i> </md-button> </div> <div class="dialog-content"> <form ng-submit="saveApplication()"> <md-content> <md-input-container> <label>Alias</label> <input type="text" ng-model="application.alias" autocomplete="off" md-autofocus="true"> </md-input-container> </md-content> <md-dialog-actions layout="row"> <md-button class="md-raised md-warn" ng-click="cancel()" aria-label="Cancel">Cancel</md-button> <md-button class="md-raised md-primary" ng-disabled="lock_submit" type="submit" aria-label="Save">Save</md-button> </md-dialog-actions> </form> </div> </md-dialog>'),a.put("views/dialog_editfile.html",'<md-dialog class="flyve-dialog" flex="66"> <div class="dialog-header"> <h2>Edit File</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="Closes window which helps creating new device"> <i class="fa fa-times"></i> </md-button> </div> <div class="dialog-content"> <form ng-submit="saveFile()"> <md-content> <md-input-container> <label>File Name</label> <input type="text" ng-model="file.name" autocomplete="off" md-autofocus="true"> </md-input-container> </md-content> <md-dialog-actions layout="row"> <md-button class="md-raised md-warn" ng-click="cancel()" aria-label="Cancel">Cancel</md-button> <md-button class="md-raised md-primary" ng-disabled="lock_submit" type="submit" aria-label="Save">Save</md-button> </md-dialog-actions> </form> </div> </md-dialog>'),a.put("views/dialog_editfleet.html",'<md-dialog class="flyve-dialog fleet-panel" flex="true"> <div class="dialog-header"> <h2>{{fleet.id ? \'Editing\' : \'Creating\'}} Fleet</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="Closes window which helps creating new device"> <i class="fa fa-times"></i> </md-button> </div> <div class="dialog-content"> <form ng-submit="saveFleet()"> <md-content> <md-tabs flex="true" md-dynamic-height="true" md-selected="selectedIndex"> <md-tab> <md-tab-label>Main</md-tab-label> <md-tab-body> <md-input-container> <label>Fleet Name</label> <input type="text" ng-model="fleet.name" md-autofocus="true"> </md-input-container> </md-tab-body> </md-tab> <md-tab class="policies-tab"> <md-tab-label>Policies</md-tab-label> <md-tab-body> <div class="policies-box" layout="row" layout-xs="column"> <div layout="column" class="policies-filter"> <md-autocomplete flex="true" md-input-name="autocompleteField" md-input-maxlength="18" md-no-cache="noCache" md-selected-item="selectedItem" md-selected-item-change="selectedPolicyChange(item)" md-search-text="searchText" md-items="item in queryPolicySearch(searchText)" md-item-text="item.name" md-floating-label="Available policies"> <md-item-template> <span md-highlight-text="searchText">{{item.name}}</span> </md-item-template> <md-not-found> No policies matching "{{searchText}}" were found. </md-not-found> </md-autocomplete> <div class="policies-categories"> <md-accordion> <md-accordion-group> <md-subheader class="md-no-sticky">Policies Category</md-subheader> <md-accordion-content md-heading="{{category.name}}" md-arrow="true" ng-repeat="category in data.policies.categories"> <md-accordion-button ng-click="addPolicyToFleet(policy)" ng-repeat="policy in category.policies">{{policy.name}}</md-accordion-button> </md-accordion-content> </md-accordion-group> </md-accordion> </div> </div> <div class="policies-used"> <table st-table="policiesUsed" flyve-table="true" st-pipe="fillPolicyTable"> <thead> <tr> <th>Policies Used <span>Policies Used</span></th> <th>Value <span>Value</span></th> <th class="action-column"></th> <th class="action-column"></th> </tr> </thead> <tbody> <tr ng-repeat="policy in data.policies.virtual"> <td>{{policy.name}}</td> <td>{{policy.value_showed}}</td> <td class="action-column"> <md-button aria-label="Edit this policy from the fleet" ng-click="editPolicy(policy)" class="md-icon-button edit-action"> <i class="fa fa-pencil"></i> </md-button> </td> <td class="action-column"> <md-button aria-label="Delete this policy from the fleet" ng-click="deletePolicyFromFleet(policy)" class="md-icon-button delete-action"> <i class="fa fa-trash-o"></i> </md-button> </td> </tr> </tbody> </table> </div> </div> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Applications</md-tab-label> <md-tab-body> <div layout="column"> <p> Choose here the applications which you want automatically installed on the devices with this fleet </p> <h2>Current Applications for this Fleet</h2> <md-list> <md-list-item ng-show="data.applications.current.length == 0 && data.applications.deploy.length == 0"> <p>No application choosen to be installed for the devices that are/will-be in this Fleet</p> </md-list-item> <md-list-item ng-repeat="application in data.applications.current"> <p>{{application.alias}} ({{application.name}})</p> <md-button aria-label="Delete this application from the fleet" type="button" ng-click="deleteApplicationFromFleet(application)"> <i class="fa fa-times"></i> </md-button> </md-list-item> <md-list-item ng-repeat="application in data.applications.deploy"> <p>{{application.alias}} ({{application.name}})</p> <md-button aria-label="Delete this application from the fleet" type="button" ng-click="deleteApplicationFromFleet(application)"> <i class="fa fa-times"></i> </md-button> </md-list-item> </md-list> <h2>Add Applications for this fleet</h2> <md-select aria-label="Select a application to add to the fleet" ng-hide="noMoreApplicationsAvailableToAdd()" ng-model="selectedApplicationToAdd" md-on-close="addApplicationToFleet(selectedApplicationToAdd)" ng-model-options="{trackBy: \'$value.id\'}"> <md-option ng-repeat="application in data.applications.available" ng-value="application" ng-hide="data.applications.deploy.indexOf(application) > -1 || data.applications.current.indexOf(application) > -1"> {{application.alias}} ({{application.name}}) </md-option> </md-select> <p ng-show="noMoreApplicationsAvailableToAdd() ">{{noMoreApplicationsAvailableToAddMsg}}</p> </div> </md-tab-body> </md-tab> <md-tab> <md-tab-label>Files</md-tab-label> <md-tab-body> <div class="add-files-panel" layout="row"> <div class="current-files" flex="true"> <ul> <li ng-repeat="file in data.files.virtual" class="file"> <span class="filename">{{file.name}}</span> <md-button aria-label="Delete this file" type="button" class="md-icon-button" ng-click="deleteAssociatedFile(file)"> <i class="fa fa-times"></i> </md-button> </li> </ul> </div> <div class="add-file" ng-init="pathToSaveFileTo = \'\' ; isPromptingCustomPath = false" flex="true"> <browse-file-button ngf-select="true" ng-model="fileUpload.upload"></browse-file-button> <br> <md-autocomplete md-selected-item="selectedPath" md-search-text-change="searchPathChange(pathToSaveFileTo)" md-search-text="pathToSaveFileTo" md-selected-item-change="selectedPathChange(path)" md-items="path in queryPathSearch(pathToSaveFileTo)" md-item-text="path.name" md-min-length="0" placeholder="Custom destination path"> <md-item-template> <span md-highlight-text="pathToSaveFileTo" md-highlight-flags="^i">{{path.name}}</span> </md-item-template> </md-autocomplete> <md-progress-linear md-mode="determinate" value="{{fileUpload.progress}}" class="md-primary"></md-progress-linear> <div layout="row"> <span flex="true"></span> <md-button class="md-raised md-primary" ng-disabled="lock_file" ng-click="uploadFile(fileUpload.upload, pathToSaveFileTo)" aria-label="Save">Add file</md-button> </div> </div> </div> </md-tab-body> </md-tab> </md-tabs> <md-button type="submit" class="dialog-main-button main-action-button md-primary md-raised" aria-label="Save">Save</md-button> </md-content> </form> </div> </md-dialog>'),
a.put("views/dialog_editpolicy.html",'<md-dialog class="flyve-dialog" aria-label="Editing Policy" flex="40"> <div class="dialog-header"> <h2>{{ policy.name }}</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="Closes window which helps editing policy"> <i class="fa fa-times"></i> </md-button> </div> <md-dialog-content class="md-dialog-content" role="document" tabindex="-1"> <div ng-if="::dialog.mdHtmlContent" class="md-dialog-content-body" ng-bind-html="::dialog.mdHtmlContent"></div> <div class="md-dialog-content-body"> <p>{{ policy.comment }}</p> </div> <md-input-container md-no-float="true" ng-if="policy.type === \'bool\'" class="md-prompt-input-container"> <md-checkbox ng-model="policy.value" aria-label="{{ policy.name }}" ng-true-value="1" ng-false-value="0"> {{ policy.symbol }} </md-checkbox> </md-input-container> <md-input-container ng-if="policy.type === \'int\'" md-no-float="true" class="md-prompt-input-container"> <input md-autofocus="true" ng-model="policy.value" placeholder="0" aria-label="{{ policy.name }}"> </md-input-container> <md-input-container md-no-float="true" ng-if="policy.type === \'dropdown\'" class="md-prompt-input-container"> <md-select ng-model="policy.value" aria-label="{{ policy.name }}"> <md-option ng-repeat="(key, value) in types" value="{{key}}"> {{value}} </md-option> </md-select> </md-input-container> </md-dialog-content> <md-dialog-actions> <md-button ng-click="cancel()" class="md-primary">Cancel</md-button> <md-button ng-click="save(policy.value)" class="md-primary">Accept</md-button> </md-dialog-actions> </md-dialog>\''),a.put("views/dialog_edituser.html",'<md-dialog class="flyve-dialog" flex="66"> <div class="dialog-header"> <h2>Edit user</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="close this dialog"> <i class="fa fa-times"></i> </md-button> </div> <div class="dialog-content"> <form ng-submit="saveUser()" name="form"> <md-content layout="column"> <div layout="row"> <md-input-container> <label>First name</label> <input name="firstname" autocomplete="given-name" type="text" ng-model="input.firstname" maxlength="255"> </md-input-container> <md-input-container> <label>Last name</label> <input name="lastname" autocomplete="family-name" type="text" ng-model="input.lastname" maxlength="255"> </md-input-container> </div> <md-input-container> <label>Email</label> <input name="username" autocomplete="username" type="email" ng-model="input.username" maxlength="255" required> </md-input-container> <div layout="row"> <md-input-container> <label>Password</label> <input name="password" autocomplete="new-password" type="password" ng-model="input.password" maxlength="255" auto-validate="true"> </md-input-container> <md-input-container> <label>Password (confirmation)</label> <input registration-password-confirmation-field="true" name="password2" autocomplete="off" type="password" ng-model="input.password2" maxlength="255"> </md-input-container> </div> <div class="form-errors"> <ul> <li ng-show="form.$error.email"> Enter a valid email </li> <li ng-show="form.$error.passwordAndConfirmationAreTheSame"> Confirmation password doesn\'t match provided password </li> </ul> </div> </md-content> <md-dialog-actions layout="row"> <md-button class="md-raised md-warn" ng-click="cancel()" aria-label="Cancel">Cancel</md-button> <md-button class="md-raised md-primary" ng-disabled="form.$invalid || lock_submit" type="submit" aria-label="Save">Save</md-button> </md-dialog-actions> </form> </div> </md-dialog>'),a.put("views/dialog_enrollnewdevice.html",'<md-dialog class="flyve-dialog" flex="66"> <div class="dialog-header"> <h2>Enroll new device</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="Closes window which helps enroll new device"> <i class="fa fa-times"></i> </md-button> </div> <div class="dialog-content"> <form ng-submit="enrollDevice()"> <md-content layout="column"> <p>Please insert an active email address.</p> <p>An email will be sent with a QR code.</p> <md-input-container> <label>Email</label> <input type="text" ng-model="user_email"> </md-input-container> </md-content> <md-dialog-actions layout="row"> <md-button class="md-raised md-warn" ng-click="cancel()" aria-label="Cancel">Cancel</md-button> <md-button class="md-raised md-primary" ng-disabled="lock_submit" type="submit" aria-label="Save">Save</md-button> </md-dialog-actions> </form> </div> </md-dialog>'),a.put("views/dialog_newapplication.html",'<md-dialog class="flyve-dialog" flex="66"> <div class="dialog-header"> <h2>New Application</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="Closes window that helps creating new application"> <i class="fa fa-times"></i> </md-button> </div> <div class="dialog-content"> <form ng-submit="saveApplication(applicationFile)"> <md-content> <p>You are adding a new application available for your fleets.</p> <br> <div layout="row"> <md-input-container flex="true"> <label>Name (Alias for the Application)</label> <input type="text" ng-model="application.alias"> </md-input-container> <browse-file-button ngf-select="validateFile(applicationFile)" ng-model="applicationFile" ngf-accept="application/vnd.android.package-archive" required></browse-file-button> </div> <md-progress-linear class="md-primary" md-mode="determinate" value="{{uploadProgress}}"></md-progress-linear> <div class="form-errors"> <ul> <li ng-show="errors.show"> {{errors.message}} </li> </ul> </div> </md-content> <md-dialog-actions layout="row"> <md-button class="md-raised md-warn" ng-click="cancel()" aria-label="Cancel">Cancel</md-button> <md-button class="md-raised md-primary" ng-disabled="lock_submit" type="submit" aria-label="Save">Save</md-button> </md-dialog-actions> </form> </div> </md-dialog>'),a.put("views/dialog_newfile.html",'<md-dialog class="flyve-dialog" flex="66"> <div class="dialog-header"> <h2>New File</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="Closes window that helps creating new file"> <i class="fa fa-times"></i> </md-button> </div> <div class="dialog-content"> <form ng-submit="saveFile(fileBlob)"> <md-content> <p>You are adding a new file available for your fleets.</p> <br> <div layout-gt-sm="row"> <md-input-container flex="true"> <label>Name</label> <input type="text" ng-model="file.name"> </md-input-container> <browse-file-button ngf-select="showName(fileBlob)" ng-model="fileBlob" required></browse-file-button> </div> <md-progress-linear class="md-primary" md-mode="determinate" value="{{uploadProgress}}"></md-progress-linear> </md-content> <md-dialog-actions layout="row"> <md-button class="md-raised md-warn" ng-click="cancel()" aria-label="Cancel">Cancel</md-button> <md-button class="md-raised md-primary" ng-disabled="lock_submit" type="submit" aria-label="Save">Save</md-button> </md-dialog-actions> </form> </div> </md-dialog>'),a.put("views/dialog_register.html",'<md-dialog class="flyve-dialog" flex="66"> <div class="dialog-header"> <h2>New user</h2> <span flex="true"></span> <md-button class="md-icon-button close-dialog-button" ng-click="cancel()" aria-label="close this dialog"> <i class="fa fa-times"></i> </md-button> </div> <div class="dialog-content"> <form ng-submit="attemptRegister()" name="form"> <md-content layout="column"> <div layout="row"> <md-input-container> <label>First name</label> <input name="firstname" autocomplete="given-name" type="text" ng-model="input.firstname" maxlength="255"> </md-input-container> <md-input-container> <label>Last name</label> <input name="lastname" autocomplete="family-name" type="text" ng-model="input.lastname" maxlength="255"> </md-input-container> </div> <md-input-container> <label>Email</label> <input name="username" autocomplete="username" type="email" ng-model="input.username" maxlength="255" required> </md-input-container> <div layout="row"> <md-input-container> <label>Password</label> <input name="password" autocomplete="new-password" type="password" ng-model="input.password" maxlength="255" auto-validate="true" required> </md-input-container> <md-input-container> <label>Password (confirmation)</label> <input registration-password-confirmation-field="true" name="password2" autocomplete="off" type="password" ng-model="input.password2" maxlength="255" required> </md-input-container> </div> <div class="form-errors"> <ul> <li ng-show="form.$error.email"> Enter a valid email </li> <li ng-show="form.$error.passwordAndConfirmationAreTheSame"> Confirmation password doesn\'t match provided password </li> </ul> </div> </md-content> <md-dialog-actions layout="row"> <md-button class="md-primary md-cancel-button md-ink-ripple" ng-click="cancel()" aria-label="Cancel">Cancel</md-button> <md-button class="md-primary md-confirm-button md-ink-ripple" ng-disabled="form.$invalid || lock_submit" type="submit" aria-label="Register">Register</md-button> </md-dialog-actions> </form> </div> </md-dialog>'),a.put("views/help.html",'<div class="view help-panel" ng-cloak="true"> <h2 class="collection-infos"> Help </h2> <md-content flex="true" layout-padding="true" class="help-info"> <br> <p>Documentation in progress. <a href="#" ui-sref="contact_teclib" ui-sref-active="active">Contact us</a> for more information about the documentation.</p> <br> </md-content> </div>'),a.put("views/invitationlogs.html",'<div class="view invitationlog-panel"> <h2 class="collection-infos"> <span class="invitationlog-title">Invitation </span> <span class="invitationlog-name">{{invitation_email}}</span> </h2> <div class="table-container"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span>{{invitation_email}}</span> Invitation </p> </div> <table st-table="displayedInvitations" flyve-table="true" st-pipe="fillTable"> <thead> <tr> <th class="id-column"># <span>#</span></th> <th>Date <span>Date</span></th> <th>Event <span>Event</span></th> </tr> </thead> <tbody> <tr ng-repeat="log in displayedInvitationLogs"> <td class="id-column">{{log.id}}</td> <td>{{log.date_creation}}</td> <td>{{log.event}}</td> </tr> </tbody> </table> <p class="table-loading" ng-show="loading"> <i class="fa fa-spinner"></i>Loading logs... </p> </div> </div> </div>'),a.put("views/invitations.html",'<div class="view"> <h2 class="collection-infos"><span>{{collectionLength}}</span> Pending Invitation</h2> <div class="table-container"> <div class="table-wrapper"> <div class="fixed-header-background"> <p class="collection-infos"><span>{{collectionLength}}</span> Pending Invitation</p> </div> <table st-table="displayedInvitations" flyve-table="true" st-pipe="fillTable"> <thead> <tr> <th class="id-column"># <span>#</span></th> <th>Email <span>Email</span></th> <th class="action-column"></th> <th class="action-column"></th> <th class="action-column"></th> </tr> </thead> <tbody> <tr ng-repeat="invitation in displayedInvitations"> <td class="id-column">{{invitation.id}}</td> <td>{{invitation.user_email}}</td> <td class="action-column"> <md-button ng-click="invitationLogs(invitation.id)" aria-label="Get logs" class="md-icon-button logs-action"> <md-tooltip> Get logs </md-tooltip> <i class="fa fa-exclamation-triangle"></i> </md-button> </td> <td class="action-column"> <md-button ng-click="resendEmail(invitation)" aria-label="Resend Email" class="md-icon-button resend-action"> <md-tooltip> Resend Email </md-tooltip> <i class="fa fa-envelope-o"></i> </md-button> </td> <td class="action-column"> <md-button ng-click="deleteEmail(invitation)" aria-label="Delete Email" class="md-icon-button delete-action"> <md-tooltip> Delete Email </md-tooltip> <i class="fa fa-trash-o"></i> </md-button> </td> </tr> </tbody> </table> <p class="table-loading" ng-show="loading"> <i class="fa fa-spinner"></i>Loading invitations... </p> </div> </div> <div class="fab-action-box"> <md-button type="button" aria-label="actions for position" class="md-fab md-accent" ng-disabled="lock_insert" ng-click="insertIntoTable()"> <i class="fa fa-plus" aria-hidden="true"></i> </md-button> </div> </div>'),a.put("views/loggedusermenu.html",'<div class="when-nav-big"> <div class="menu-bar" ng-click="toggleOpened($event)" ng-class="opened ? \'opened\' : \'\'"> <div class="avatar"> <img src="images/stupid-user-avatar.png" alt="User Image"> </div> <div class="message"> <p>My Account</p> </div> <div class="caret"> <i class="fa" ng-class="opened ? \'fa-chevron-up\' : \'fa-chevron-down\'"></i> </div> </div> <div class="submenu" ng-show="opened"> <ul> <li><a href="#" ui-sref="account_page" ui-sref-active="active"><i class="fa fa-user"></i> Settings</a></li> <li><a ng-click="disconnect()"><i class="fa fa-sign-out"></i> Disconnect</a></li> </ul> </div> </div> <div class="when-nav-small"> <md-fab-speed-dial md-direction="down" class="md-fling" md-open="fabModOpened"> <md-fab-trigger> <a ui-sref="account_page"> <md-button aria-label="Administration menu" class="md-fab" md-ink-ripple="#158784"> <div class="avatar"> <img src="images/stupid-user-avatar.png" alt="User Image"> </div> </md-button> </a> </md-fab-trigger> <md-fab-actions> <a ui-sref="account_page"> <md-button aria-label="My account" class="md-fab" md-ink-ripple="#158784" ng-click="forceClose()"> <i class="fa fa-user"></i> <md-tooltip>My account</md-tooltip> </md-button> </a> <md-button aria-label="Disconnect" class="md-fab" md-ink-ripple="#158784" ng-click="disconnect()"> <i class="fa fa-sign-out"></i> <md-tooltip>Disconnect</md-tooltip> </md-button> </md-fab-actions> </md-fab-speed-dial> </div>'),a.put("views/login.html",'<section class="login-page"> <div class="container" layout="column" layout-padding="" layout-wrap="" layout-fill="" ng-cloak=""> <!--\r\n    <div layout="row" layout-align="center center">\r\n      <img src="images/logo-flyve.png" alt="Flyve Logo" class="logo">\r\n    </div>\r\n    --> <form ng-submit="attemptLogin()"> <md-card class="login-card"> <img ng-src="images/logo-flyve-login.png" class="md-card-image" alt="Flyve MDM Logo"> <md-card-title> <md-card-title-text> <span class="md-headline">Mobile Device Management</span> </md-card-title-text> </md-card-title> <md-card-content> <md-input-container class="md-icon-float md-block" flex-gt-sm="true"> <label>Username</label> <md-icon class="fa fa-user fa-lg md-warn" aria-hidden="true"></md-icon> <input ng-model="loginCredentials.username" type="text" autocomplete="username" name="email" required> </md-input-container> <md-input-container class="md-icon-float md-block" flex-gt-sm="true"> <label>Password</label> <md-icon class="fa fa-unlock-alt fa-lg md-warn" aria-hidden="true"></md-icon> <input ng-model="loginCredentials.password" type="password" autocomplete="current-password" name="password" required> </md-input-container> </md-card-content> <md-card-actions layout="row" layout-align="end center"> <md-button ng-click="openRegistrationDialog($event)">SignUp</md-button> <md-button type="submit" class="md-raised md-primary">Login</md-button> </md-card-actions> </md-card> </form> </div> </section> <div class="md-body-1 layout-margin foo" layout="row" layout-align="end center"> <p>A solution powered by</p> <a href="http://teclib-edition.com/en/" target="_blank" title="Teclib\'\' Web Site"><img src="images/logo-teclib-blanc-1-2.png" alt="Flyve Logo" height="24"></a> </div>'),a.put("views/navigation.html",'<logged-user-menu></logged-user-menu> <a ui-sref="dashboard"> <img src="images/logo-flyve.png" alt="Logo FlyveMDM" class="logo"> </a> <ul class="menu"> <li class="menu-entry"> <a href="#" ui-sref="dashboard" ui-sref-active="active" has-ripple="true"><i class="fa fa-tachometer"></i> <span>Dashboard</span></a> </li> <li class="menu-entry"> <a href="#" ui-sref="devices" ui-sref-active="active" has-ripple="true"><i class="fa fa-mobile"></i> <span>Devices</span></a> </li> <li class="menu-entry"> <div class="when-nav-big"> <a has-ripple="true" class="submenu-toggle invisible-when-nav-small"><i class="fa fa-wrench"></i> <span>Administration</span></a> <navbar-submenu class="invisible-when-nav-small"> <ul> <li> <a ui-sref="admin_fleets" ui-sref-active="active"> <i class="fa fa-ship"></i> <span>Fleets</span> </a> </li> <li> <a ui-sref="admin_files" ui-sref-active="active"> <i class="fa fa-file"></i> <span>Files</span> </a> </li> <li> <a ui-sref="admin_applications" ui-sref-active="active"> <i class="fa fa-rocket"></i> <span>Applications</span> </a> </li> <li> <a ui-sref="admin_users" ui-sref-active="active"> <i class="fa fa-user"></i> <span>Users</span> </a> </li> </ul> </navbar-submenu> </div> <div class="when-nav-small"> <md-fab-speed-dial md-direction="down" class="md-fling"> <md-fab-trigger> <md-button aria-label="Administration menu" class="md-fab" md-ink-ripple="#158784"> <i class="fa fa-wrench"></i> </md-button> </md-fab-trigger> <md-fab-actions> <md-button aria-label="Fleets" class="md-fab" md-ink-ripple="#158784" ui-sref="admin_fleets"> <i class="fa fa-ship"></i> <md-tooltip>Fleets</md-tooltip> </md-button> <md-button aria-label="Files" class="md-fab" md-ink-ripple="#158784" ui-sref="admin_files"> <i class="fa fa-file"></i> <md-tooltip>Files</md-tooltip> </md-button> <md-button aria-label="Applications" class="md-fab" md-ink-ripple="#158784" ui-sref="admin_applications"> <i class="fa fa-rocket"></i> <md-tooltip>Applications</md-tooltip> </md-button> <md-button aria-label="Users" class="md-fab" md-ink-ripple="#158784" ui-sref="admin_users"> <i class="fa fa-user"></i> <md-tooltip>Users</md-tooltip> </md-button> </md-fab-actions> </md-fab-speed-dial> </div> </li> </ul> <a class="small-toggle-button" ng-click="nav.toggleSmall()" has-ripple="true"></a> <div class="navigation-footer"> <div class="misc-links"> <a href="#" ui-sref="about_page" ui-sref-active="active"><i class="fa fa-info"></i> About</a> <a href="#" ui-sref="contact_teclib" ui-sref-active="active"><i class="fa fa-envelope-o"></i> Contact</a> <a href="#" ui-sref="help_page" ui-sref-active="active"><i class="fa fa-comment"></i> Help</a> </div> <div class="copyright-block"> <p>&copy;Teclib 2015 - All rights reserved</p> </div> </div>'),a.put("views/toast_notification.html",'<md-toast> <span class="md-toast-text" flex="true">Custom toast!</span> <md-button class="md-highlight" ng-click="openMoreInfo($event)"> More info </md-button> <md-button ng-click="closeToast()"> Close </md-button> </md-toast>')}]);